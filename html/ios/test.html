<html>

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<meta name="generator" content="Aspose.Words for .NET 15.1.0.0" />
		<title></title>
	</head>

	<body>
		<div>
			<header style="text-align: center;">
			<div style="color: #177F46; font-size: 20px; margin-top: 30px;text-align: left;">
				&nbsp;PHP
			</div>
			<hr style="background: #E3E3E3;height:1px;border:none;border-top:1px;" />
			<div style="color: #177F46; font-size: 20px; ">
				文件操作
			</div>
			<br />
		</header>
		<div style="font-size: 14px;">
				<p style="margin:0pt"><span style="color:#808080; font-family:Calibri; font-size:10pt">2017</span><span style="color:#808080; font-family:SimSun; font-size:10pt">年</span><span style="color:#808080; font-family:Calibri; font-size:10pt">1</span><span style="color:#808080; font-family:SimSun; font-size:10pt">月</span><span style="color:#808080; font-family:Calibri; font-size:10pt">25</span><span style="color:#808080; font-family:SimSun; font-size:10pt">日</span><span style="color:#808080; font-family:宋体; font-size:10pt"> </span><span style="color:#808080; font-family:SimSun; font-size:10pt">星期三</span></p>
			<p style="margin:0pt"><span style="color:#808080; font-family:SimSun; font-size:10pt">下午</span><span style="color:#808080; font-family:Calibri; font-size:10pt">12:01</span></p>
			<p style="margin:0pt"><span style="color:#7f0000; font-family:SimSun; font-size:10pt">学习要点</span><span style="color:#7f0000; font-family:Meiryo; font-size:10pt">: </span></p>
			<p style="margin:0pt"><span style="color:#7f0000; font-family:Meiryo; font-size:10pt">1.</span><span style="color:#7f0000; font-family:SimSun; font-size:10pt">目录操作</span><span style="color:#7f0000; font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="color:#7f0000; font-family:Meiryo; font-size:10pt">2.</span><span style="color:#7f0000; font-family:SimSun; font-size:10pt">磁盘、目录和文件计算</span><span style="color:#7f0000; font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="color:#7f0000; font-family:Meiryo; font-size:10pt">3.</span><span style="color:#7f0000; font-family:SimSun; font-size:10pt">文件处理</span><span style="color:#7f0000; font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">&#xa0;</span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">将相关的数据组织为文件和目录等实体，</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span><span style="color:#333333; font-family:SimSun; font-size:10pt">这一直是计算环境的核心概念。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span><span style="color:#333333; font-family:SimSun; font-size:10pt">出于这个因，原</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span><span style="color:#333333; font-family:SimSun; font-size:10pt">程序员需要有一种方法来获得关于文件和目录的重要细节，如位置、大小、最后修改时间、</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span><span style="color:#333333; font-family:SimSun; font-size:10pt">最后访问时间和其他确定信息。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="font-family:Meiryo; font-size:10pt">一.</span><span style="font-family:SimSun; font-size:10pt">目录操作</span><span style="font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="font-family:SimSun; font-size:10pt">解析目录路径</span><span style="font-family:Meiryo; font-size:10pt">:</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">basename()函数返回路径的文件名部分。 </span></p>
			<p style="margin:0pt"><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">&lt;? </span></p>
			<p style="margin:0pt"><span style="color:#660000; font-family:Meiryo; font-size:10pt">$path </span><span style="font-family:Meiryo; font-size:10pt">= </span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">'C:\AppServ\www\Basic6\Demo1.php'</span><span style="font-family:Meiryo; font-size:10pt">; </span></p>
			<p style="margin:0pt"><span style="color:#0000ff; font-family:Meiryo; font-size:10pt">echo </span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">'path:'</span><span style="font-family:Meiryo; font-size:10pt">.basename(</span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$path</span><span style="font-family:Meiryo; font-size:10pt">); </span><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">?&gt; </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">获取路径的目录</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">:di rname()</span><span style="color:#333333; font-family:SimSun; font-size:10pt">函数返回路径目录部分。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">&lt;? </span></p>
			<p style="margin:0pt"><span style="color:#660000; font-family:Meiryo; font-size:10pt">$path </span><span style="font-family:Meiryo; font-size:10pt">= </span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">'C:\AppServ\www\Basic6\Demo1.php'</span><span style="font-family:Meiryo; font-size:10pt">; </span></p>
			<p style="margin:0pt"><span style="color:#0000ff; font-family:Meiryo; font-size:10pt">echo </span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">'path:'</span><span style="font-family:Meiryo; font-size:10pt">.dirname(</span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$path</span><span style="font-family:Meiryo; font-size:10pt">); </span><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">?&gt; </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">关于路径的信息:pathi nfo( )</span><span style="color:#333333; font-family:SimSun; font-size:10pt">函数创建一个关联数组，</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> 其 中包括: </span><span style="color:#333333; font-family:SimSun; font-size:10pt">目录名、</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> 基 </span><span style="color:#333333; font-family:SimSun; font-size:10pt">本名和扩展</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> 名。 </span></p>
			<p style="margin:0pt"><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">&lt;? </span></p>
			<p style="margin:0pt"><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">?&gt; </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">确定绝对路径</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">:realpath()函数将 path </span><span style="color:#333333; font-family:SimSun; font-size:10pt">中的所有符号链接和相对路径引用转换为相应的</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span><span style="color:#333333; font-family:SimSun; font-size:10pt">硬链接和绝对路径。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">&lt;? </span></p>
			<p style="margin:0pt"><span style="color:#660000; font-family:Meiryo; font-size:10pt">$path </span><span style="font-family:Meiryo; font-size:10pt">= </span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">'C:\AppServ\www\Basic6\Demo1.php'</span><span style="font-family:Meiryo; font-size:10pt">; </span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$array_path </span><span style="font-family:Meiryo; font-size:10pt">= pathinfo(</span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$path</span><span style="font-family:Meiryo; font-size:10pt">);</span></p>
			<p style="margin:0pt"><span style="font-family:Meiryo; font-size:10pt">prin t_r(</span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$arra y_p ath</span><span style="font-family:Meiryo; font-size:10pt">); </span></p>
			<p style="margin:0pt"><span style="color:#660000; font-family:Meiryo; font-size:10pt">$path </span><span style="font-family:Meiryo; font-size:10pt">= </span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">'../index.php'</span><span style="font-family:Meiryo; font-size:10pt">; </span><span style="color:#0000ff; font-family:Meiryo; font-size:10pt">echo </span><span style="font-family:Meiryo; font-size:10pt">realpath(</span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$path</span><span style="font-family:Meiryo; font-size:10pt">); </span></p>
			<p style="margin:0pt"><span style="font-family:Meiryo; font-size:10pt">&#xa0;</span></p>
			<p style="margin:0pt"><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">?&gt; </span></p>
			<p style="margin:0pt"><span style="font-family:Meiryo; font-size:10pt">二.</span><span style="font-family:SimSun; font-size:10pt">磁盘、目录和文件计算</span></p>
			<p style="margin:0pt"><span style="font-family:Meiryo; font-size:10pt">确定文件的大小:</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">filesize()</span><span style="color:#333333; font-family:SimSun; font-size:10pt">函数返回指定文件字节大小。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">&lt;? </span></p>
			<p style="margin:0pt"><span style="color:#660000; font-family:Meiryo; font-size:10pt">$file </span><span style="font-family:Meiryo; font-size:10pt">= </span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">'C:\AppServ\www\Basic6\Demo1.php'</span><span style="font-family:Meiryo; font-size:10pt">; </span></p>
			<p style="margin:0pt"><span style="color:#0000ff; font-family:Meiryo; font-size:10pt">echo </span><span style="font-family:Meiryo; font-size:10pt">round(filesize(</span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$file</span><span style="font-family:Meiryo; font-size:10pt">)/</span><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">1024</span><span style="font-family:Meiryo; font-size:10pt">,</span><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">2</span><span style="font-family:Meiryo; font-size:10pt">).</span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">'KB'</span><span style="font-family:Meiryo; font-size:10pt">; </span><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">?&gt; </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">计算磁盘的可用空间</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">:di sk_free_space() </span><span style="color:#333333; font-family:SimSun; font-size:10pt">函数返回指定的目录所在磁盘分区的可用空间。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">&lt;? </span></p>
			<p style="margin:0pt"><span style="color:#660000; font-family:Meiryo; font-size:10pt">$drive </span><span style="font-family:Meiryo; font-size:10pt">= </span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">'C:'</span><span style="font-family:Meiryo; font-size:10pt">; </span></p>
			<p style="margin:0pt"><span style="color:#0000ff; font-family:Meiryo; font-size:10pt">echo </span><span style="font-family:Meiryo; font-size:10pt">round(disk_free_space(</span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$drive</span><span style="font-family:Meiryo; font-size:10pt">)/</span><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">1024</span><span style="font-family:Meiryo; font-size:10pt">/</span><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">1024</span><span style="font-family:Meiryo; font-size:10pt">,</span><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">2</span><span style="font-family:Meiryo; font-size:10pt">).</span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">'MB'</span><span style="font-family:Meiryo; font-size:10pt">; </span><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">?&gt; </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">计算磁盘的总容量</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">:disk_total_space()</span><span style="color:#333333; font-family:SimSun; font-size:10pt">函数返回指定的目录所在磁盘分区的总容量。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">&lt;? </span></p>
			<p style="margin:0pt"><span style="color:#660000; font-family:Meiryo; font-size:10pt">$drive </span><span style="font-family:Meiryo; font-size:10pt">= </span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">'C:'</span><span style="font-family:Meiryo; font-size:10pt">; </span></p>
			<p style="margin:0pt"><span style="color:#0000ff; font-family:Meiryo; font-size:10pt">echo </span><span style="font-family:Meiryo; font-size:10pt">round(disk_total_space(</span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$drive</span><span style="font-family:Meiryo; font-size:10pt">)/</span><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">1024</span><span style="font-family:Meiryo; font-size:10pt">/</span><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">1024</span><span style="font-family:Meiryo; font-size:10pt">,</span><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">2</span><span style="font-family:Meiryo; font-size:10pt">).</span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">'MB'</span><span style="font-family:Meiryo; font-size:10pt">; </span><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">?&gt; </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">确定文件的最后访问时间</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">:fileatime()</span><span style="color:#333333; font-family:SimSun; font-size:10pt">函数返回文件的最后访问时间，采用的</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">Unix </span><span style="color:#333333; font-family:SimSun; font-size:10pt">时间</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> 戳格式。 </span></p>
			<p style="margin:0pt"><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">&lt;? </span></p>
			<p style="margin:0pt"><span style="color:#0000ff; font-family:Meiryo; font-size:10pt">echo </span><span style="font-family:Meiryo; font-size:10pt">date(</span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">"Y-m-d,h:i:s"</span><span style="font-family:Meiryo; font-size:10pt">,fileatime(</span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$file</span><span style="font-family:Meiryo; font-size:10pt">)); </span><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">?&gt; </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">确定文件的最后改变时间</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">:filectime()</span><span style="color:#333333; font-family:SimSun; font-size:10pt">函数返回文件的最后改变时间，采用</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">Unix </span><span style="color:#333333; font-family:SimSun; font-size:10pt">时间戳</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> 格式。 </span></p>
			<p style="margin:0pt"><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">&lt;? </span></p>
			<p style="margin:0pt"><span style="color:#0000ff; font-family:Meiryo; font-size:10pt">echo </span><span style="font-family:Meiryo; font-size:10pt">date(</span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">"Y-m-d,h:i:s"</span><span style="font-family:Meiryo; font-size:10pt">,filectime(</span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$file</span><span style="font-family:Meiryo; font-size:10pt">)); </span><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">?&gt; </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">确定文件的最后修改时间</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">:filemtime()</span><span style="color:#333333; font-family:SimSun; font-size:10pt">函数返回文件的最后修改时间，</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> 采用Unix </span><span style="color:#333333; font-family:SimSun; font-size:10pt">时间戳</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> 格式。 </span></p>
			<p style="margin:0pt"><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">&lt;? </span></p>
			<p style="margin:0pt"><span style="color:#0000ff; font-family:Meiryo; font-size:10pt">echo </span><span style="font-family:Meiryo; font-size:10pt">date(</span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">"Y-m-d,h:i:s"</span><span style="font-family:Meiryo; font-size:10pt">,filemtime(</span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$file</span><span style="font-family:Meiryo; font-size:10pt">)); </span><span style="color:#ff0000; font-family:Meiryo; font-size:10pt">?&gt; </span></p>
			<p style="margin:0pt"><span style="color:#660000; font-family:Meiryo; font-size:10pt">$file </span><span style="font-family:Meiryo; font-size:10pt">= </span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">'C:\AppServ\www\Basic6\Demo1.php'</span><span style="font-family:Meiryo; font-size:10pt">; </span></p>
			<p style="margin:0pt"><span style="color:#660000; font-family:Meiryo; font-size:10pt">$file </span><span style="font-family:Meiryo; font-size:10pt">= </span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">'C:\AppServ\www\Basic6\Demo1.php'</span><span style="font-family:Meiryo; font-size:10pt">; </span></p>
			<p style="margin:0pt"><span style="color:#660000; font-family:Meiryo; font-size:10pt">$file </span><span style="font-family:Meiryo; font-size:10pt">= </span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">'C:\AppServ\www\Basic5\Demo1.php'</span><span style="font-family:Meiryo; font-size:10pt">; </span></p>
			<p style="margin:0pt"><span style="font-family:Meiryo; font-size:10pt">&#xa0;</span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">三.</span><span style="color:#333333; font-family:SimSun; font-size:10pt">文件处理</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">资源</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">(resource)</span><span style="color:#333333; font-family:SimSun; font-size:10pt">这个词常常与可以发起输入或输出流的实体联系起来。标准输入或输</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> 出、 文 </span><span style="color:#333333; font-family:SimSun; font-size:10pt">件和网络套接字都是资源的例子。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> 因 </span><span style="color:#333333; font-family:SimSun; font-size:10pt">此你会经常看到本节所介绍的很多函数都是在资</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span><span style="color:#333333; font-family:SimSun; font-size:10pt">源处理的上下文中讨论的，</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> 而 </span><span style="color:#333333; font-family:SimSun; font-size:10pt">不是文件处理，</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span><span style="color:#333333; font-family:SimSun; font-size:10pt">这</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span><span style="color:#333333; font-family:SimSun; font-size:10pt">本身是因为所有这些函数都能够与前面所述</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span><span style="color:#333333; font-family:SimSun; font-size:10pt">的资源结合使用。但是，由于这些函数与文件结合使用是应用中最常见的。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">将数据写入一个文件，有 3 </span><span style="color:#333333; font-family:SimSun; font-size:10pt">个步骤</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">:</span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">1. </span><span style="color:#333333; font-family:SimSun; font-size:10pt">打开这个文件。如果文件不存在，需要先创建它。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> 2. </span><span style="color:#333333; font-family:SimSun; font-size:10pt">将数据写入这个文件。</span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">3. </span><span style="color:#333333; font-family:SimSun; font-size:10pt">关闭这个文件</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">同样，从一个文件中读出数据，也有</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> 3 </span><span style="color:#333333; font-family:SimSun; font-size:10pt">个步骤</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">:</span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">1. </span><span style="color:#333333; font-family:SimSun; font-size:10pt">打开这个文件。如果这个文件不能打开，就应该意识到这一点并且正确地退出。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> 2. </span><span style="color:#333333; font-family:SimSun; font-size:10pt">从文件中读出数据。</span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">3. </span><span style="color:#333333; font-family:SimSun; font-size:10pt">关闭这个文件。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">打开文件 </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">要在 PHP 中打开一个文件，可以使用 fopen()</span><span style="color:#333333; font-family:SimSun; font-size:10pt">函数。当打开一个文件的时候，还需要指</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> 定如何使用它。也就是，文件模式。 </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">选择文件模式</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">:</span><span style="color:#333333; font-family:SimSun; font-size:10pt">当打开一个文件的时候，有</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> 3 </span><span style="color:#333333; font-family:SimSun; font-size:10pt">中选择</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">:</span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">1. </span><span style="color:#333333; font-family:SimSun; font-size:10pt">打开文件为了只读、只写或者读和写。</span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">2. </span><span style="color:#333333; font-family:SimSun; font-size:10pt">如果要写一个文件，你可能希望覆盖所有已有的文件内容，或者仅仅将新数据追加到</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">文件末尾。如果该文件已经存在，也可以终止程序的执行而不是覆盖该文件。</span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">3. </span><span style="color:#333333; font-family:SimSun; font-size:10pt">如果希望在一个区分了二进制方式和纯文本方式的系统上写一个文件，</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span><span style="color:#333333; font-family:SimSun; font-size:10pt">还必须制定采</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">用的方式。 </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">函数 fopen()支持以上 3 </span><span style="color:#333333; font-family:SimSun; font-size:10pt">中方式的组合。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">$fp=fopen(文件路径 , 文件模式 , [是否在 incloude_path 中搜索一个文件],[</span><span style="color:#333333; font-family:SimSun; font-size:10pt">允许文件名</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span><span style="color:#333333; font-family:SimSun; font-size:10pt">以协议名称开始</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">(如 http://)] ) </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">fop en() </span><span style="color:#333333; font-family:SimSun; font-size:10pt">函数的文件模式总结</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">模式 </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">r </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">r+ </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">w </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">w+ </span></p>
			<table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:0pt">
				<tr>
					<td style="border-bottom-color:#a3a3a3; border-bottom-style:solid; border-bottom-width:1pt; border-left-color:#a3a3a3; border-left-style:solid; border-left-width:1pt; border-right-color:#a3a3a3; border-right-style:solid; border-right-width:1pt; border-top-color:#a3a3a3; border-top-style:solid; border-top-width:1pt; padding:3.5pt; vertical-align:top; width:40pt">
						<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">a </span></p>
					</td>
					<td style="border-bottom-color:#a3a3a3; border-bottom-style:solid; border-bottom-width:1pt; border-left-color:#a3a3a3; border-left-style:solid; border-left-width:1pt; border-right-color:#a3a3a3; border-right-style:solid; border-right-width:1pt; border-top-color:#a3a3a3; border-top-style:solid; border-top-width:1pt; padding:3.5pt; vertical-align:top; width:42.4pt">
						<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">只写 </span></p>
					</td>
					<td style="border-bottom-color:#a3a3a3; border-bottom-style:solid; border-bottom-width:1pt; border-left-color:#a3a3a3; border-left-style:solid; border-left-width:1pt; border-right-color:#a3a3a3; border-right-style:solid; border-right-width:1pt; border-top-color:#a3a3a3; border-top-style:solid; border-top-width:1pt; padding:3.5pt; vertical-align:top; width:369.15pt">
						<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">文件指针置于文件末尾。如果文件不存在，则尝试创建。此</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span><span style="color:#333333; font-family:SimSun; font-size:10pt">模式成为追加</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> (append)。 </span></p>
					</td>
				</tr>
				<tr>
					<td style="border-bottom-color:#a3a3a3; border-bottom-style:solid; border-bottom-width:1pt; border-left-color:#a3a3a3; border-left-style:solid; border-left-width:1pt; border-right-color:#a3a3a3; border-right-style:solid; border-right-width:1pt; border-top-color:#a3a3a3; border-top-style:solid; border-top-width:1pt; padding:3.5pt; vertical-align:top; width:40pt">
						<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">a+ </span></p>
					</td>
					<td style="border-bottom-color:#a3a3a3; border-bottom-style:solid; border-bottom-width:1pt; border-left-color:#a3a3a3; border-left-style:solid; border-left-width:1pt; border-right-color:#a3a3a3; border-right-style:solid; border-right-width:1pt; border-top-color:#a3a3a3; border-top-style:solid; border-top-width:1pt; padding:3.5pt; vertical-align:top; width:42.4pt">
						<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">读写</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
					</td>
					<td style="border-bottom-color:#a3a3a3; border-bottom-style:solid; border-bottom-width:1pt; border-left-color:#a3a3a3; border-left-style:solid; border-left-width:1pt; border-right-color:#a3a3a3; border-right-style:solid; border-right-width:1pt; border-top-color:#a3a3a3; border-top-style:solid; border-top-width:1pt; padding:3.5pt; vertical-align:top; width:369.15pt">
						<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">文件指针置于文件末尾。如果文件不存在，则尝试创建。此</span><br /><span style="color:#333333; font-family:SimSun; font-size:10pt">过程称为追加到文件。</span></p>
					</td>
				</tr>
				<tr>
					<td style="border-bottom-color:#a3a3a3; border-bottom-style:solid; border-bottom-width:1pt; border-left-color:#a3a3a3; border-left-style:solid; border-left-width:1pt; border-right-color:#a3a3a3; border-right-style:solid; border-right-width:1pt; border-top-color:#a3a3a3; border-top-style:solid; border-top-width:1pt; padding:3.5pt; vertical-align:top; width:40pt">
						<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">b </span></p>
					</td>
					<td style="border-bottom-color:#a3a3a3; border-bottom-style:solid; border-bottom-width:1pt; border-left-color:#a3a3a3; border-left-style:solid; border-left-width:1pt; border-right-color:#a3a3a3; border-right-style:solid; border-right-width:1pt; border-top-color:#a3a3a3; border-top-style:solid; border-top-width:1pt; padding:3.5pt; vertical-align:top; width:43.85pt">
						<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">二进制</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
					</td>
					<td style="border-bottom-color:#a3a3a3; border-bottom-style:solid; border-bottom-width:1pt; border-left-color:#a3a3a3; border-left-style:solid; border-left-width:1pt; border-right-color:#a3a3a3; border-right-style:solid; border-right-width:1pt; border-top-color:#a3a3a3; border-top-style:solid; border-top-width:1pt; padding:3.5pt; vertical-align:top; width:376.6pt">
						<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">二进制模式</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">----</span><span style="color:#333333; font-family:SimSun; font-size:10pt">用于与其他模式进行连接。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span><span style="color:#333333; font-family:SimSun; font-size:10pt">如果文件系统能够</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span><span style="color:#333333; font-family:SimSun; font-size:10pt">区分二进制文件和文本文件，你可能会使用它。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">Windows 系 </span><span style="color:#333333; font-family:SimSun; font-size:10pt">统可以区分</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">;而 UNIX </span><span style="color:#333333; font-family:SimSun; font-size:10pt">则不区分。推荐一直使用这个选项，</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span><span style="color:#333333; font-family:SimSun; font-size:10pt">以便获得最大程度的可移植性。二进制模式是默认的模式。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
					</td>
				</tr>
				<tr>
					<td style="border-bottom-color:#a3a3a3; border-bottom-style:solid; border-bottom-width:1pt; border-left-color:#a3a3a3; border-left-style:solid; border-left-width:1pt; border-right-color:#a3a3a3; border-right-style:solid; border-right-width:1pt; border-top-color:#a3a3a3; border-top-style:solid; border-top-width:1pt; padding:3.5pt; vertical-align:top; width:40pt">
						<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">t </span></p>
					</td>
					<td style="border-bottom-color:#a3a3a3; border-bottom-style:solid; border-bottom-width:1pt; border-left-color:#a3a3a3; border-left-style:solid; border-left-width:1pt; border-right-color:#a3a3a3; border-right-style:solid; border-right-width:1pt; border-top-color:#a3a3a3; border-top-style:solid; border-top-width:1pt; padding:3.5pt; vertical-align:top; width:42.4pt">
						<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">文本 </span></p>
					</td>
					<td style="border-bottom-color:#a3a3a3; border-bottom-style:solid; border-bottom-width:1pt; border-left-color:#a3a3a3; border-left-style:solid; border-left-width:1pt; border-right-color:#a3a3a3; border-right-style:solid; border-right-width:1pt; border-top-color:#a3a3a3; border-top-style:solid; border-top-width:1pt; padding:3.5pt; vertical-align:top; width:369.15pt">
						<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">用于与其他模式的结合。这个模式只是</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">Windows</span><span style="color:#333333; font-family:SimSun; font-size:10pt">系统下一个</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span><span style="color:#333333; font-family:SimSun; font-size:10pt">选项。它不是推荐选项，除非你曾经在代码中使用</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> b </span><span style="color:#333333; font-family:SimSun; font-size:10pt">选项。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
					</td>
				</tr>
			</table>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">如果 fopen()</span><span style="color:#333333; font-family:SimSun; font-size:10pt">函数调用失败，函数将返回</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> false</span><span style="color:#333333; font-family:SimSun; font-size:10pt">。可以用一种对于用户友好的方式来处理</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span><span style="color:#333333; font-family:SimSun; font-size:10pt">这个错误，可以通过抑制</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> PHP </span><span style="color:#333333; font-family:SimSun; font-size:10pt">的错误信息并且根据自己的方式给出错误信息。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="font-family:Meiryo; font-size:10pt">@</span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$fp</span><span style="font-family:Meiryo; font-size:10pt">=fopen(</span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">"file.txt"</span><span style="font-family:Meiryo; font-size:10pt">,</span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">'ab'</span><span style="font-family:Meiryo; font-size:10pt">); </span><span style="color:#333333; font-family:Meiryo; font-size:10pt">//ab </span><span style="color:#333333; font-family:SimSun; font-size:10pt">追加并且二进制方式</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">写文件 </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">在 PHP </span><span style="color:#333333; font-family:SimSun; font-size:10pt">中写文件相对比较简单。可以使用</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">fwrite() 或者 fputs() </span><span style="color:#333333; font-family:SimSun; font-size:10pt">函数。我们可以使用如</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span><span style="color:#333333; font-family:SimSun; font-size:10pt">下方式调用</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> fwrite(); </span></p>
			<p style="margin:0pt"><span style="font-family:Meiryo; font-size:10pt">fwrite(</span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$fp</span><span style="font-family:Meiryo; font-size:10pt">, </span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$outputstring</span><span style="font-family:Meiryo; font-size:10pt">, [int length]); </span><span style="color:#333333; font-family:Meiryo; font-size:10pt">//</span><span style="color:#333333; font-family:SimSun; font-size:10pt">第三个可选参数为最大字符数</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span><span style="color:#333333; font-family:SimSun; font-size:10pt">这个函数告诉</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> PHP 将保存在$outputstring 中的字符串写入到$fp 指向的文件中。 fwrite()</span><span style="color:#333333; font-family:SimSun; font-size:10pt">函数的一个新的替换函数是</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> file_put_contects(). </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">可以通过</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> PHP 的内置 strlen()</span><span style="color:#333333; font-family:SimSun; font-size:10pt">函数获得字符串的长度</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">: </span><span style="font-family:Meiryo; font-size:10pt">fwrite(</span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$fp</span><span style="font-family:Meiryo; font-size:10pt">, </span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$outputstring</span><span style="font-family:Meiryo; font-size:10pt">, strlen(</span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$outputstring</span><span style="font-family:Meiryo; font-size:10pt">)); </span></p>
			<p style="margin:0pt"><span style="font-family:SimSun; font-size:10pt">当然还有一种不需要资源句柄的写入方法</span><span style="font-family:Meiryo; font-size:10pt">:file_put_contents()。 </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">关闭文件</span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">当文件使用完毕后，应该将其关闭。应该调用</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> fclose()函数: </span><span style="font-family:Meiryo; font-size:10pt">fclose(</span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$fp </span><span style="font-family:Meiryo; font-size:10pt">); </span></p>
			<p style="margin:0pt"><span style="font-family:SimSun; font-size:10pt">读出文件</span><span style="font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="color:#660000; font-family:Meiryo; font-size:10pt">$fp </span><span style="font-family:Meiryo; font-size:10pt">= fopen(</span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">"file.txt"</span><span style="font-family:Meiryo; font-size:10pt">,</span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">"r"</span><span style="font-family:Meiryo; font-size:10pt">); </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">fgetc():</span><span style="color:#333333; font-family:SimSun; font-size:10pt">读出一个字符，并将指针移到下一个字符。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> fgets():</span><span style="color:#333333; font-family:SimSun; font-size:10pt">读出一行字符，可以指定一行显示的长度。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> fgetss():</span><span style="color:#333333; font-family:SimSun; font-size:10pt">从文件指针中读取一行并过滤掉</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> HTML </span><span style="color:#333333; font-family:SimSun; font-size:10pt">标记。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> fread():</span><span style="color:#333333; font-family:SimSun; font-size:10pt">读取定量的字符。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">fpassthru(): </span><span style="color:#333333; font-family:SimSun; font-size:10pt">输出文件指针处的所有剩余数据。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">fi l e():</span><span style="color:#333333; font-family:SimSun; font-size:10pt">将整个文件读入数组中，以行分组。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> readfi l e():</span><span style="color:#333333; font-family:SimSun; font-size:10pt">读入一个文件并写入到输出缓冲。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> file_get_contents():</span><span style="color:#333333; font-family:SimSun; font-size:10pt">将整个文件读入一个字符串。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="font-family:Meiryo; font-size:10pt">&#xa0;</span></p>
			<p style="margin:0pt"><span style="font-family:Meiryo; font-size:10pt">&#xa0;</span></p>
			<p style="margin:0pt"><span style="font-family:Meiryo; font-size:10pt">&#xa0;</span></p>
			<p style="margin:0pt"><span style="color:#0000ff; font-family:Meiryo; font-size:10pt">while </span><span style="font-family:Meiryo; font-size:10pt">(!feof(</span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$fp</span><span style="font-family:Meiryo; font-size:10pt">)) { </span><span style="color:#0000ff; font-family:Meiryo; font-size:10pt">echo </span><span style="font-family:Meiryo; font-size:10pt">fgetc(</span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$fp</span><span style="font-family:Meiryo; font-size:10pt">); </span></p>
			<p style="margin:0pt"><span style="font-family:Meiryo; font-size:10pt">} </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">判断读完文件函数</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">:feof() ，返回 true ,!feof() 返回 false; </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">查看文件是否存在</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">:fi l e_exi sts( ); </span><span style="color:#0000ff; font-family:Meiryo; font-size:10pt">if </span><span style="font-family:Meiryo; font-size:10pt">(file_exists(</span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">"file.txt"</span><span style="font-family:Meiryo; font-size:10pt">)) { </span></p>
			<p style="margin:0pt"><span style="color:#7f7f7f; font-family:Meiryo; font-size:10pt">//.. </span></p>
			<p style="margin:0pt"><span style="font-family:Meiryo; font-size:10pt">}</span></p>
			<p style="margin:0pt"><span style="color:#0000ff; font-family:Meiryo; font-size:10pt">else </span><span style="font-family:Meiryo; font-size:10pt">{ </span></p>
			<p style="margin:0pt"><span style="color:#7f7f7f; font-family:Meiryo; font-size:10pt">//... </span></p>
			<p style="margin:0pt"><span style="font-family:Meiryo; font-size:10pt">} </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">查看一个文件的大小</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">:filesize();</span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">删除一个文件</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">:unli nk();</span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">在文件中定位:rewind()、fseek()和 ftell();</span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">rewi nd()</span><span style="color:#333333; font-family:SimSun; font-size:10pt">函数可以将文件指针复位到文件的开始。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> ftell()</span><span style="color:#333333; font-family:SimSun; font-size:10pt">函数可以以字节为单位报告文件指针当前在文件中的位置。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> fseek()</span><span style="color:#333333; font-family:SimSun; font-size:10pt">函数可以将文件指针</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> fp 从 whence </span><span style="color:#333333; font-family:SimSun; font-size:10pt">位置移动</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> offset </span><span style="color:#333333; font-family:SimSun; font-size:10pt">字节。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">文件锁定</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">  </span><span style="color:#333333; font-family:SimSun; font-size:10pt">假设两个客户试图同时订购同一件商品。那么他们同时打开了这个文件，同时的更新，</span><br /><span style="color:#333333; font-family:SimSun; font-size:10pt">就会出现少一个客户订购的数据。</span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">为了避免这样的问题，可以使用文件锁定的方法。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> fl ock( )函数。 </span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">flock </span><span style="color:#333333; font-family:SimSun; font-size:10pt">的操作值</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
			<table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:0pt">
				<tr>
					<td style="border-bottom-color:#a3a3a3; border-bottom-style:solid; border-bottom-width:1pt; border-left-color:#a3a3a3; border-left-style:solid; border-left-width:1pt; border-right-color:#a3a3a3; border-right-style:solid; border-right-width:1pt; border-top-color:#a3a3a3; border-top-style:solid; border-top-width:1pt; padding:3.5pt; vertical-align:top; width:106.1pt">
						<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">操作值</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
					</td>
					<td style="border-bottom-color:#a3a3a3; border-bottom-style:solid; border-bottom-width:1pt; border-left-color:#a3a3a3; border-left-style:solid; border-left-width:1pt; border-right-color:#a3a3a3; border-right-style:solid; border-right-width:1pt; border-top-color:#a3a3a3; border-top-style:solid; border-top-width:1pt; padding:3.5pt; vertical-align:top; width:254.3pt">
						<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">意义</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
					</td>
				</tr>
				<tr>
					<td style="border-bottom-color:#a3a3a3; border-bottom-style:solid; border-bottom-width:1pt; border-left-color:#a3a3a3; border-left-style:solid; border-left-width:1pt; border-right-color:#a3a3a3; border-right-style:solid; border-right-width:1pt; border-top-color:#a3a3a3; border-top-style:solid; border-top-width:1pt; padding:3.5pt; vertical-align:top; width:107.15pt">
						<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">LOCK_SH(</span><span style="color:#333333; font-family:SimSun; font-size:10pt">以前为</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> 1) </span></p>
					</td>
					<td style="border-bottom-color:#a3a3a3; border-bottom-style:solid; border-bottom-width:1pt; border-left-color:#a3a3a3; border-left-style:solid; border-left-width:1pt; border-right-color:#a3a3a3; border-right-style:solid; border-right-width:1pt; border-top-color:#a3a3a3; border-top-style:solid; border-top-width:1pt; padding:3.5pt; vertical-align:top; width:253.3pt">
						<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">读写锁定。这意味着文件可以共享，其</span><br /><span style="color:#333333; font-family:SimSun; font-size:10pt">他人可以读该文件</span></p>
					</td>
				</tr>
				<tr>
					<td style="border-bottom-color:#a3a3a3; border-bottom-style:solid; border-bottom-width:1pt; border-left-color:#a3a3a3; border-left-style:solid; border-left-width:1pt; border-right-color:#a3a3a3; border-right-style:solid; border-right-width:1pt; border-top-color:#a3a3a3; border-top-style:solid; border-top-width:1pt; padding:3.5pt; vertical-align:top; width:106.2pt">
						<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">LOCK_EX(</span><span style="color:#333333; font-family:SimSun; font-size:10pt">以前为</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> 2) </span></p>
					</td>
					<td style="border-bottom-color:#a3a3a3; border-bottom-style:solid; border-bottom-width:1pt; border-left-color:#a3a3a3; border-left-style:solid; border-left-width:1pt; border-right-color:#a3a3a3; border-right-style:solid; border-right-width:1pt; border-top-color:#a3a3a3; border-top-style:solid; border-top-width:1pt; padding:3.5pt; vertical-align:top; width:254.15pt">
						<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">写操作锁定。这是互斥的。该文件不能</span><br /><span style="color:#333333; font-family:Meiryo; font-size:10pt">被共享</span></p>
					</td>
				</tr>
				<tr>
					<td style="border-bottom-color:#a3a3a3; border-bottom-style:solid; border-bottom-width:1pt; border-left-color:#a3a3a3; border-left-style:solid; border-left-width:1pt; border-right-color:#a3a3a3; border-right-style:solid; border-right-width:1pt; border-top-color:#a3a3a3; border-top-style:solid; border-top-width:1pt; padding:3.5pt; vertical-align:top; width:106.1pt">
						<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">LOCK_UN(</span><span style="color:#333333; font-family:SimSun; font-size:10pt">以前为</span><span style="color:#333333; font-family:Meiryo; font-size:10pt">3) </span></p>
					</td>
					<td style="border-bottom-color:#a3a3a3; border-bottom-style:solid; border-bottom-width:1pt; border-left-color:#a3a3a3; border-left-style:solid; border-left-width:1pt; border-right-color:#a3a3a3; border-right-style:solid; border-right-width:1pt; border-top-color:#a3a3a3; border-top-style:solid; border-top-width:1pt; padding:3.5pt; vertical-align:top; width:254.3pt">
						<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">释放已有的锁定</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
					</td>
				</tr>
				<tr>
					<td style="border-bottom-color:#a3a3a3; border-bottom-style:solid; border-bottom-width:1pt; border-left-color:#a3a3a3; border-left-style:solid; border-left-width:1pt; border-right-color:#a3a3a3; border-right-style:solid; border-right-width:1pt; border-top-color:#a3a3a3; border-top-style:solid; border-top-width:1pt; padding:3.5pt; vertical-align:top; width:107.5pt">
						<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">LOCK_NB(</span><span style="color:#333333; font-family:SimSun; font-size:10pt">以前为</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> 4) </span></p>
					</td>
					<td style="border-bottom-color:#a3a3a3; border-bottom-style:solid; border-bottom-width:1pt; border-left-color:#a3a3a3; border-left-style:solid; border-left-width:1pt; border-right-color:#a3a3a3; border-right-style:solid; border-right-width:1pt; border-top-color:#a3a3a3; border-top-style:solid; border-top-width:1pt; padding:3.5pt; vertical-align:top; width:252.95pt">
						<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">防止在请求加锁时发生阻塞</span></p>
					</td>
				</tr>
			</table>
			<p style="margin:0pt"><span style="color:#660000; font-family:Meiryo; font-size:10pt">$fp </span><span style="font-family:Meiryo; font-size:10pt">= fopen(</span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">"file.txt"</span><span style="font-family:Meiryo; font-size:10pt">,</span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">"ab"</span><span style="font-family:Meiryo; font-size:10pt">); flock(</span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$fp</span><span style="font-family:Meiryo; font-size:10pt">,LOCK_EX); </span><span style="color:#7f7f7f; font-family:Meiryo; font-size:10pt">//</span><span style="color:#7f7f7f; font-family:SimSun; font-size:10pt">锁定</span><span style="color:#7f7f7f; font-family:Meiryo; font-size:10pt"> </span><span style="font-family:Meiryo; font-size:10pt">fwrite(</span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$fp</span><span style="font-family:Meiryo; font-size:10pt">, </span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$outsum</span><span style="font-family:Meiryo; font-size:10pt">);</span></p>
			<p style="margin:0pt"><span style="font-family:Meiryo; font-size:10pt">flock(</span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$fp</span><span style="font-family:Meiryo; font-size:10pt">, LOCK_UN); </span><span style="color:#7f7f7f; font-family:Meiryo; font-size:10pt">//</span><span style="color:#7f7f7f; font-family:SimSun; font-size:10pt">释放</span><span style="color:#7f7f7f; font-family:Meiryo; font-size:10pt"> </span><span style="font-family:Meiryo; font-size:10pt">fclose(</span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$fp </span><span style="font-family:Meiryo; font-size:10pt">); </span></p>
			<p style="margin:0pt"><span style="font-family:Meiryo; font-size:10pt">&#xa0;</span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:SimSun; font-size:10pt">目录句柄操作</span></p>
			<p style="margin:0pt"><span style="color:#333333; font-family:Meiryo; font-size:10pt">opendi r():</span><span style="color:#333333; font-family:SimSun; font-size:10pt">打开路径指定的目录流。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> closedir():</span><span style="color:#333333; font-family:SimSun; font-size:10pt">关闭目录流。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> readdir():</span><span style="color:#333333; font-family:SimSun; font-size:10pt">返回目录中的各个元素。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="color:#660000; font-family:Meiryo; font-size:10pt">$dir </span><span style="font-family:Meiryo; font-size:10pt">= opendir(</span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">'C:\AppServ\www\Basic5'</span><span style="font-family:Meiryo; font-size:10pt">); </span><span style="color:#0000ff; font-family:Meiryo; font-size:10pt">while </span><span style="font-family:Meiryo; font-size:10pt">(!!</span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$file </span><span style="font-family:Meiryo; font-size:10pt">= readdir(</span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$dir</span><span style="font-family:Meiryo; font-size:10pt">)) { </span></p>
			<p style="margin:0pt"><span style="color:#0000ff; font-family:Meiryo; font-size:10pt">echo </span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$file</span><span style="font-family:Meiryo; font-size:10pt">.</span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">'&lt;br /&gt;'</span><span style="font-family:Meiryo; font-size:10pt">; } </span></p>
			<p style="margin:0pt"><span style="font-family:Meiryo; font-size:10pt">closedir( </span><span style="color:#660000; font-family:Meiryo; font-size:10pt">$dir</span><span style="font-family:Meiryo; font-size:10pt">); </span><span style="color:#333333; font-family:Meiryo; font-size:10pt">scandir():</span><span style="color:#333333; font-family:SimSun; font-size:10pt">将目录读入数组。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="font-family:Meiryo; font-size:10pt">print_r(scandir(</span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">'C:\AppServ\www\Basic5'</span><span style="font-family:Meiryo; font-size:10pt">)); </span><span style="color:#333333; font-family:Meiryo; font-size:10pt">rmdi r():</span><span style="color:#333333; font-family:SimSun; font-size:10pt">删除指定的目录。</span><span style="color:#333333; font-family:Meiryo; font-size:10pt"> </span></p>
			<p style="margin:0pt"><span style="font-family:Meiryo; font-size:10pt">rmdir(</span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">'C:\AppServ\w ww \Basic5\123'</span><span style="font-family:Meiryo; font-size:10pt">); </span><span style="color:#333333; font-family:Meiryo; font-size:10pt">rename():重命名文件。 </span></p>
			<p style="margin:0pt"><span style="font-family:Meiryo; font-size:10pt">re nam e(</span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">'Dem o1.ph p'</span><span style="font-family:Meiryo; font-size:10pt">,</span><span style="color:#007f00; font-family:Meiryo; font-size:10pt">'Dem o01.p hp'</span><span style="font-family:Meiryo; font-size:10pt">); </span></p>
			<p style="margin:0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:12pt">&#xa0;</span></p>
		</div>	
		</div>
	</body>

</html>