<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>

	<body>
		<div>
			<style>
				code {
					color: #177F46;
				}
				
				b,
				strong,
				h3,
				h4 {
					color: #7C3876;
				}
				
				img {
					max-width: 300px;
				}
				
				{
					text-align: center;
				}
			</style>
			<header style="text-align: center;">
				<div style="color: #177F46; font-size: 20px; margin-top: 30px;text-align: left;">
					&nbsp;iOS
				</div>
				<hr style="background: #E3E3E3;height:1px;border:none;border-top:1px;" />
				<div style="color: #177F46; font-size: 20px; ">
					手把手教你Core Animation
				</div>
				<br />
			</header>

			<div class="note" style="line-height: 24px;font-size: 14px; padding: 50px;">
				<!-- BEGIN .entry -->
				<div class=" entry ">

					<blockquote>
						<p><strong>源码下载：<a href="https://github.com/huaral/ZFChangeAnimation " target="_blank ">源码</a></strong></p>
					</blockquote>
					<p>最近在技术群里，有人发了一张带有动画效果的图片。觉得很有意思，便动手实现了一下。在这篇文章中你将会学到Core Animation显式动画中的关键帧动画、组合动画、CABasicAnimation动画。先上一张原图的动画效果。</p>
					<p>点击此查看
						<a href="https://github.com/WZF-Fei/ZFChangeAnimation/blob/master/origin%20animation.gif " target="_blank ">原图动画效果</a>。</p>
					<p>本文要实现的效果图如下：</p>
					<div><img alt=" " src="http://jbcdn2.b0.upaiyun.com/2016/03/decc8a052118d2b0accd214a66bd7c50.gif " />&nbsp;</p>
						<div>实现的效果图.gif</div>
					</div>
					<p>把原动画gif动画在mac上使用图片浏览模式打开，我们可以看到动画每一帧的显示。从每一帧上的展示过程，可以把整体的动画进行拆分成两大部分。</p>
					<p>第一部分（Part1）从初始状态变成取消状态（图片上是由横实线变成上线横线交叉的圆）。<br /> 第二部分（Part2）从取消状态变回初始状态。
					</p>
					<p>下面我们先详细分析Part1是怎么实现的。根据动画图，把Part1再细分成三步。</p>
					<p>Step1 : 中间横实线的由右向左的运动效果。这其实是一个组合动画。是先向左偏移的同时横线变短。先看一下实现的动态效果。</p>
					<div><img alt=" " src="http://jbcdn2.b0.upaiyun.com/2016/03/0060b43cb277e26da775a95f345fa9ea.gif " />&nbsp;</p>
						<div>step1 Animation.gif</div>
					</div>
					<p>■ 向左偏移&#8212;使用基本动画中<code>animationWithKeyPath</code>键值对的方式来改变动画的值。我们这里使用<code>position.x</code>,同样可以使用<code>transform.translation.x</code>来平移。</p>
					<p>■ 改变横线的大小&#8212;使用经典的<code>strokeStart</code>和<code>strokeEnd</code>。其实上横线长度的变化的由<code>strokeStart</code>到<code>strokeEnd</code>之间的值来共同来决定。改变<code>strokeEnd</code>的值由1.0到0.4，不改变<code>strokeStart</code>的值。横线的长度会从右侧方向由1.0倍长度减少到0.4倍长度。参见示意图的红色区域。</p>
					<div><img alt=" " src="http://jbcdn2.b0.upaiyun.com/2016/03/0b529c9295b1ee5a9879f25ebd79a32a.png " />&nbsp;</p>
						<div>stroke示意图.png</div>
					</div>
					<p></p>
					<!-- Crayon Syntax Highlighter v2.7.1.1 -->

					<div id="crayon-58cf866c5bdf0968367630 " class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate " data-settings=" minimize scroll-always " style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; ">

						<div class="crayon-toolbar " data-settings=" show " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; "><span class="crayon-title "></span>
							<div class="crayon-tools " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; ">
								<div class="crayon-button crayon-nums-button " title="切换是否显示行编号 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-plain-button " title="纯文本显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-wrap-button " title="切换自动换行 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-expand-button " title="点击展开代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-copy-button " title="复制代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-popup-button " title="在新窗口中显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
							</div>
						</div>
						<div class="crayon-info " style="min-height: 18.2px !important; line-height: 18.2px !important; "></div>
						<div class="crayon-plain-wrap "><textarea wrap="soft " class="crayon-plain print-no " data-settings="dblclick " readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important; ">
-(void) animationStep1{

    //最终changedLayer的状态
    _changedLayer.strokeEnd = 0.4;
    //基本动画，长度有1.0减少到0.4
    CABasicAnimation *strokeAnimation = [CABasicAnimation animationWithKeyPath:@"strokeEnd "];
    strokeAnimation.fromValue = [NSNumber numberWithFloat:1.0f];
    strokeAnimation.toValue = [NSNumber numberWithFloat:0.4f];
    //基本动画，向左偏移10个像素
    CABasicAnimation *pathAnimation = [CABasicAnimation animationWithKeyPath:@"position.x "];
    pathAnimation.fromValue = [NSNumber numberWithFloat:0.0];
    pathAnimation.toValue = [NSNumber numberWithFloat:-10];
    //组合动画，平移和长度减少同时进行
    CAAnimationGroup *animationGroup = [CAAnimationGroup animation];
    animationGroup.animations = [NSArray arrayWithObjects:strokeAnimation,pathAnimation, nil];
    animationGroup.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];
    animationGroup.duration = kStep1Duration;
    //设置代理
    animationGroup.delegate = self;
    animationGroup.removedOnCompletion = YES;
    //监听动画
    [animationGroup setValue:@"animationStep1 " forKey:@"animationName "];
    //动画加入到changedLayer上
    [_changedLayer addAnimation:animationGroup forKey:nil];
}</textarea></div>
						<div class="crayon-main " style=" ">
							<table class="crayon-table ">
								<tr class="crayon-row ">
									<td class="crayon-nums " data-settings="show ">
										<div class="crayon-nums-content " style="font-size: 13px !important; line-height: 15px !important; ">
											<div class="crayon-num " data-line="crayon-58cf866c5bdf0968367630-1 ">1</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5bdf0968367630-2 ">2</div>
											<div class="crayon-num " data-line="crayon-58cf866c5bdf0968367630-3 ">3</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5bdf0968367630-4 ">4</div>
											<div class="crayon-num " data-line="crayon-58cf866c5bdf0968367630-5 ">5</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5bdf0968367630-6 ">6</div>
											<div class="crayon-num " data-line="crayon-58cf866c5bdf0968367630-7 ">7</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5bdf0968367630-8 ">8</div>
											<div class="crayon-num " data-line="crayon-58cf866c5bdf0968367630-9 ">9</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5bdf0968367630-10 ">10</div>
											<div class="crayon-num " data-line="crayon-58cf866c5bdf0968367630-11 ">11</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5bdf0968367630-12 ">12</div>
											<div class="crayon-num " data-line="crayon-58cf866c5bdf0968367630-13 ">13</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5bdf0968367630-14 ">14</div>
											<div class="crayon-num " data-line="crayon-58cf866c5bdf0968367630-15 ">15</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5bdf0968367630-16 ">16</div>
											<div class="crayon-num " data-line="crayon-58cf866c5bdf0968367630-17 ">17</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5bdf0968367630-18 ">18</div>
											<div class="crayon-num " data-line="crayon-58cf866c5bdf0968367630-19 ">19</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5bdf0968367630-20 ">20</div>
											<div class="crayon-num " data-line="crayon-58cf866c5bdf0968367630-21 ">21</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5bdf0968367630-22 ">22</div>
											<div class="crayon-num " data-line="crayon-58cf866c5bdf0968367630-23 ">23</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5bdf0968367630-24 ">24</div>
											<div class="crayon-num " data-line="crayon-58cf866c5bdf0968367630-25 ">25</div>
										</div>
									</td>
									<td class="crayon-code ">
										<div class="crayon-pre " style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
											<div class="crayon-line " id="crayon-58cf866c5bdf0968367630-1 "><span class="crayon-o ">-</span><span class="crayon-sy ">(</span><span class="crayon-t ">void</span><span class="crayon-sy ">)</span><span class="crayon-h "> </span><span class="crayon-e ">animationStep1</span><span class="crayon-sy ">{</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5bdf0968367630-2 ">&nbsp;</div>
											<div class="crayon-line " id="crayon-58cf866c5bdf0968367630-3 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//最终changedLayer的状态</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5bdf0968367630-4 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">_changedLayer</span><span class="crayon-sy ">.</span><span class="crayon-v ">strokeEnd</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-cn ">0.4</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5bdf0968367630-5 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//基本动画，长度有1.0减少到0.4</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5bdf0968367630-6 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CABasicAnimation *</span><span class="crayon-v ">strokeAnimation</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CABasicAnimation </span><span class="crayon-v ">animationWithKeyPath</span><span class="crayon-o ">:</span><span class="crayon-sy ">@</span><span class="crayon-s ">"strokeEnd "</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5bdf0968367630-7 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">strokeAnimation</span><span class="crayon-sy ">.</span><span class="crayon-v ">fromValue</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-cn ">1.0f</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5bdf0968367630-8 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">strokeAnimation</span><span class="crayon-sy ">.</span><span class="crayon-v ">toValue</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-cn ">0.4f</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5bdf0968367630-9 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//基本动画，向左偏移10个像素</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5bdf0968367630-10 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CABasicAnimation *</span><span class="crayon-v ">pathAnimation</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CABasicAnimation </span><span class="crayon-v ">animationWithKeyPath</span><span class="crayon-o ">:</span><span class="crayon-sy ">@</span><span class="crayon-s ">"position.x "</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5bdf0968367630-11 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">pathAnimation</span><span class="crayon-sy ">.</span><span class="crayon-v ">fromValue</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-cn ">0.0</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5bdf0968367630-12 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">pathAnimation</span><span class="crayon-sy ">.</span><span class="crayon-v ">toValue</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-o ">-</span><span class="crayon-cn ">10</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5bdf0968367630-13 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//组合动画，平移和长度减少同时进行</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5bdf0968367630-14 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CAAnimationGroup *</span><span class="crayon-v ">animationGroup</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAAnimationGroup </span><span class="crayon-v ">animation</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5bdf0968367630-15 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">animationGroup</span><span class="crayon-sy ">.</span><span class="crayon-v ">animations</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSArray </span><span class="crayon-v ">arrayWithObjects</span><span class="crayon-o ">:</span><span class="crayon-v ">strokeAnimation</span><span class="crayon-sy ">,</span><span class="crayon-v ">pathAnimation</span><span class="crayon-sy ">,</span><span class="crayon-h "> </span><span class="crayon-v ">nil</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5bdf0968367630-16 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">animationGroup</span><span class="crayon-sy ">.</span><span class="crayon-v ">timingFunction</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAMediaTimingFunction </span><span class="crayon-v ">functionWithName</span><span class="crayon-o ">:</span><span class="crayon-v ">kCAMediaTimingFunctionEaseIn</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5bdf0968367630-17 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">animationGroup</span><span class="crayon-sy ">.</span><span class="crayon-v ">duration</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">kStep1Duration</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5bdf0968367630-18 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//设置代理</span></div>
											<div class="crayon-line " id="crayon-58cf866c5bdf0968367630-19 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">animationGroup</span><span class="crayon-sy ">.</span><span class="crayon-v ">delegate</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-r ">self</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5bdf0968367630-20 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">animationGroup</span><span class="crayon-sy ">.</span><span class="crayon-v ">removedOnCompletion</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">YES</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5bdf0968367630-21 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//监听动画</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5bdf0968367630-22 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">animationGroup </span><span class="crayon-v ">setValue</span><span class="crayon-o ">:</span><span class="crayon-sy ">@</span><span class="crayon-s ">"animationStep1 "</span><span class="crayon-h "> </span><span class="crayon-v ">forKey</span><span class="crayon-o ">:</span><span class="crayon-sy ">@</span><span class="crayon-s ">"animationName "</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5bdf0968367630-23 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//动画加入到changedLayer上</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5bdf0968367630-24 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">_changedLayer </span><span class="crayon-v ">addAnimation</span><span class="crayon-o ">:</span><span class="crayon-e ">animationGroup </span><span class="crayon-v ">forKey</span><span class="crayon-o ">:</span><span class="crayon-v ">nil</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5bdf0968367630-25 "><span class="crayon-sy ">}</span></div>
										</div>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<!-- [Format Time: 0.0049 seconds] -->
					<p>Step2 : 由左向右的动画&#8211;向右偏移同时横线长度变长。看一下Step2要实现的动画效果。其思路和Step1是一样的。</p>
					<div><img alt=" " src="http://jbcdn2.b0.upaiyun.com/2016/03/d402d813d0572fe0de4b6b586aa99704.gif " />&nbsp;</p>
						<div>step2 Animation.gif</div>
					</div>
					<p></p>
					<!-- Crayon Syntax Highlighter v2.7.1.1 -->

					<div id="crayon-58cf866c5bdfc701988658 " class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate " data-settings=" minimize scroll-always " style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; ">

						<div class="crayon-toolbar " data-settings=" show " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; "><span class="crayon-title "></span>
							<div class="crayon-tools " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; ">
								<div class="crayon-button crayon-nums-button " title="切换是否显示行编号 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-plain-button " title="纯文本显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-wrap-button " title="切换自动换行 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-expand-button " title="点击展开代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-copy-button " title="复制代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-popup-button " title="在新窗口中显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
							</div>
						</div>
						<div class="crayon-info " style="min-height: 18.2px !important; line-height: 18.2px !important; "></div>
						<div class="crayon-plain-wrap "><textarea wrap="soft " class="crayon-plain print-no " data-settings="dblclick " readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important; ">
-(void)animationStep2
{
    CABasicAnimation *translationAnimation = [CABasicAnimation animationWithKeyPath:@"transform.translation.x "];
    translationAnimation.fromValue = [NSNumber numberWithFloat:-10];
    //strokeEnd:0.8 剩余的距离toValue = lineWidth * (1 - 0.8);

    translationAnimation.toValue = [NSNumber numberWithFloat:0.2 * lineWidth ];

    _changedLayer.strokeEnd = 0.8;
    CABasicAnimation *strokeAnimation = [CABasicAnimation animationWithKeyPath:@"strokeEnd "];
    strokeAnimation.fromValue = [NSNumber numberWithFloat:0.4f];
    strokeAnimation.toValue = [NSNumber numberWithFloat:0.8f];

    CAAnimationGroup *animationGroup = [CAAnimationGroup animation];
    animationGroup.animations = [NSArray arrayWithObjects:strokeAnimation,translationAnimation, nil];
    animationGroup.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];
    animationGroup.duration = kStep2Duration;
    //设置代理
    animationGroup.delegate = self;
    animationGroup.removedOnCompletion = YES;
    [animationGroup setValue:@"animationStep2 " forKey:@"animationName "];
    [_changedLayer addAnimation:animationGroup forKey:nil];
}</textarea></div>
						<div class="crayon-main " style=" ">
							<table class="crayon-table ">
								<tr class="crayon-row ">
									<td class="crayon-nums " data-settings="show ">
										<div class="crayon-nums-content " style="font-size: 13px !important; line-height: 15px !important; ">
											<div class="crayon-num " data-line="crayon-58cf866c5bdfc701988658-1 ">1</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5bdfc701988658-2 ">2</div>
											<div class="crayon-num " data-line="crayon-58cf866c5bdfc701988658-3 ">3</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5bdfc701988658-4 ">4</div>
											<div class="crayon-num " data-line="crayon-58cf866c5bdfc701988658-5 ">5</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5bdfc701988658-6 ">6</div>
											<div class="crayon-num " data-line="crayon-58cf866c5bdfc701988658-7 ">7</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5bdfc701988658-8 ">8</div>
											<div class="crayon-num " data-line="crayon-58cf866c5bdfc701988658-9 ">9</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5bdfc701988658-10 ">10</div>
											<div class="crayon-num " data-line="crayon-58cf866c5bdfc701988658-11 ">11</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5bdfc701988658-12 ">12</div>
											<div class="crayon-num " data-line="crayon-58cf866c5bdfc701988658-13 ">13</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5bdfc701988658-14 ">14</div>
											<div class="crayon-num " data-line="crayon-58cf866c5bdfc701988658-15 ">15</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5bdfc701988658-16 ">16</div>
											<div class="crayon-num " data-line="crayon-58cf866c5bdfc701988658-17 ">17</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5bdfc701988658-18 ">18</div>
											<div class="crayon-num " data-line="crayon-58cf866c5bdfc701988658-19 ">19</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5bdfc701988658-20 ">20</div>
											<div class="crayon-num " data-line="crayon-58cf866c5bdfc701988658-21 ">21</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5bdfc701988658-22 ">22</div>
											<div class="crayon-num " data-line="crayon-58cf866c5bdfc701988658-23 ">23</div>
										</div>
									</td>
									<td class="crayon-code ">
										<div class="crayon-pre " style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
											<div class="crayon-line " id="crayon-58cf866c5bdfc701988658-1 "><span class="crayon-o ">-</span><span class="crayon-sy ">(</span><span class="crayon-t ">void</span><span class="crayon-sy ">)</span><span class="crayon-e ">animationStep2</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5bdfc701988658-2 "><span class="crayon-sy ">{</span></div>
											<div class="crayon-line " id="crayon-58cf866c5bdfc701988658-3 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CABasicAnimation *</span><span class="crayon-v ">translationAnimation</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CABasicAnimation </span><span class="crayon-v ">animationWithKeyPath</span><span class="crayon-o ">:</span><span class="crayon-sy ">@</span><span class="crayon-s ">"transform.translation.x "</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5bdfc701988658-4 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">translationAnimation</span><span class="crayon-sy ">.</span><span class="crayon-v ">fromValue</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-o ">-</span><span class="crayon-cn ">10</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5bdfc701988658-5 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//strokeEnd:0.8 剩余的距离toValue = lineWidth * (1 - 0.8);</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5bdfc701988658-6 ">&nbsp;</div>
											<div class="crayon-line " id="crayon-58cf866c5bdfc701988658-7 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">translationAnimation</span><span class="crayon-sy ">.</span><span class="crayon-v ">toValue</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-cn ">0.2</span><span class="crayon-h "> </span><span class="crayon-o ">*</span><span class="crayon-h "> </span><span class="crayon-i ">lineWidth</span><span class="crayon-h "> </span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5bdfc701988658-8 ">&nbsp;</div>
											<div class="crayon-line " id="crayon-58cf866c5bdfc701988658-9 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">_changedLayer</span><span class="crayon-sy ">.</span><span class="crayon-v ">strokeEnd</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-cn ">0.8</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5bdfc701988658-10 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CABasicAnimation *</span><span class="crayon-v ">strokeAnimation</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CABasicAnimation </span><span class="crayon-v ">animationWithKeyPath</span><span class="crayon-o ">:</span><span class="crayon-sy ">@</span><span class="crayon-s ">"strokeEnd "</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5bdfc701988658-11 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">strokeAnimation</span><span class="crayon-sy ">.</span><span class="crayon-v ">fromValue</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-cn ">0.4f</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5bdfc701988658-12 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">strokeAnimation</span><span class="crayon-sy ">.</span><span class="crayon-v ">toValue</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-cn ">0.8f</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5bdfc701988658-13 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5bdfc701988658-14 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CAAnimationGroup *</span><span class="crayon-v ">animationGroup</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAAnimationGroup </span><span class="crayon-v ">animation</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5bdfc701988658-15 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">animationGroup</span><span class="crayon-sy ">.</span><span class="crayon-v ">animations</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSArray </span><span class="crayon-v ">arrayWithObjects</span><span class="crayon-o ">:</span><span class="crayon-v ">strokeAnimation</span><span class="crayon-sy ">,</span><span class="crayon-v ">translationAnimation</span><span class="crayon-sy ">,</span><span class="crayon-h "> </span><span class="crayon-v ">nil</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5bdfc701988658-16 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">animationGroup</span><span class="crayon-sy ">.</span><span class="crayon-v ">timingFunction</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAMediaTimingFunction </span><span class="crayon-v ">functionWithName</span><span class="crayon-o ">:</span><span class="crayon-v ">kCAMediaTimingFunctionEaseOut</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5bdfc701988658-17 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">animationGroup</span><span class="crayon-sy ">.</span><span class="crayon-v ">duration</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">kStep2Duration</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5bdfc701988658-18 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//设置代理</span></div>
											<div class="crayon-line " id="crayon-58cf866c5bdfc701988658-19 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">animationGroup</span><span class="crayon-sy ">.</span><span class="crayon-v ">delegate</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-r ">self</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5bdfc701988658-20 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">animationGroup</span><span class="crayon-sy ">.</span><span class="crayon-v ">removedOnCompletion</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">YES</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5bdfc701988658-21 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">animationGroup </span><span class="crayon-v ">setValue</span><span class="crayon-o ">:</span><span class="crayon-sy ">@</span><span class="crayon-s ">"animationStep2 "</span><span class="crayon-h "> </span><span class="crayon-v ">forKey</span><span class="crayon-o ">:</span><span class="crayon-sy ">@</span><span class="crayon-s ">"animationName "</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5bdfc701988658-22 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">_changedLayer </span><span class="crayon-v ">addAnimation</span><span class="crayon-o ">:</span><span class="crayon-e ">animationGroup </span><span class="crayon-v ">forKey</span><span class="crayon-o ">:</span><span class="crayon-v ">nil</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5bdfc701988658-23 "><span class="crayon-sy ">}</span></div>
										</div>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<!-- [Format Time: 0.0047 seconds] -->
					<p>Step3: 圆弧的动画效果和上下两个横实线的动画效果。</p>
					<ol>
						<li>画圆弧，首先想到是使用<code>UIBezierPath</code>。画个示意图来分析动画路径。示意图如下：</li>
					</ol>
					<div><img alt=" " src="http://jbcdn2.b0.upaiyun.com/2016/03/e4a0f6ca5933cbc167b47468027bdc94.jpg " />&nbsp;</p>
						<div>step3 示意图.jpg</div>
					</div>
					<p>整个path路径是由三部分组成，<code>ABC曲线</code>、<code>CD圆弧</code>、<code>DD′圆</code>。<br /> 使用
						<code>UIBezierPath</code>的方法</p>
					<!-- Crayon Syntax Highlighter v2.7.1.1 -->

					<div id="crayon-58cf866c5be02274700002 " class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate " data-settings=" minimize scroll-always " style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; ">

						<div class="crayon-toolbar " data-settings=" show " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; "><span class="crayon-title "></span>
							<div class="crayon-tools " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; ">
								<div class="crayon-button crayon-nums-button " title="切换是否显示行编号 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-plain-button " title="纯文本显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-wrap-button " title="切换自动换行 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-expand-button " title="点击展开代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-copy-button " title="复制代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-popup-button " title="在新窗口中显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
							</div>
						</div>
						<div class="crayon-info " style="min-height: 18.2px !important; line-height: 18.2px !important; "></div>
						<div class="crayon-plain-wrap "><textarea wrap="soft " class="crayon-plain print-no " data-settings="dblclick " readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important; ">
- (void)appendPath:(UIBezierPath *)bezierPath;</textarea></div>
						<div class="crayon-main " style=" ">
							<table class="crayon-table ">
								<tr class="crayon-row ">
									<td class="crayon-nums " data-settings="show ">
										<div class="crayon-nums-content " style="font-size: 13px !important; line-height: 15px !important; ">
											<div class="crayon-num " data-line="crayon-58cf866c5be02274700002-1 ">1</div>
										</div>
									</td>
									<td class="crayon-code ">
										<div class="crayon-pre " style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
											<div class="crayon-line " id="crayon-58cf866c5be02274700002-1 "><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-sy ">(</span><span class="crayon-t ">void</span><span class="crayon-sy ">)</span><span class="crayon-v ">appendPath</span><span class="crayon-o ">:</span><span class="crayon-sy ">(</span><span class="crayon-e ">UIBezierPath *</span><span class="crayon-sy ">)</span><span class="crayon-v ">bezierPath</span><span class="crayon-sy ">;</span></div>
										</div>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<!-- [Format Time: 0.0006 seconds] -->
					<p>把三部分路径关联起来。详细讲解思路。</p>
					<p>• <code>ABC曲线</code>就是贝塞尔曲线，可以根据A、B、C三点的位置使用方法</p>
					<!-- Crayon Syntax Highlighter v2.7.1.1 -->

					<div id="crayon-58cf866c5be05689817321 " class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate " data-settings=" minimize scroll-always " style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; ">

						<div class="crayon-toolbar " data-settings=" show " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; "><span class="crayon-title "></span>
							<div class="crayon-tools " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; ">
								<div class="crayon-button crayon-nums-button " title="切换是否显示行编号 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-plain-button " title="纯文本显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-wrap-button " title="切换自动换行 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-expand-button " title="点击展开代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-copy-button " title="复制代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-popup-button " title="在新窗口中显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
							</div>
						</div>
						<div class="crayon-info " style="min-height: 18.2px !important; line-height: 18.2px !important; "></div>
						<div class="crayon-plain-wrap "><textarea wrap="soft " class="crayon-plain print-no " data-settings="dblclick " readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important; ">
//endPoint 终点坐标 controlPoint1 起点坐标
//controlPoint2 起点和终点在曲线上的切点延伸相交的交点坐标
- (void)addCurveToPoint:(CGPoint)endPoint 
          controlPoint1:(CGPoint)controlPoint1 
          controlPoint2:(CGPoint)controlPoint2;</textarea></div>
						<div class="crayon-main " style=" ">
							<table class="crayon-table ">
								<tr class="crayon-row ">
									<td class="crayon-nums " data-settings="show ">
										<div class="crayon-nums-content " style="font-size: 13px !important; line-height: 15px !important; ">
											<div class="crayon-num " data-line="crayon-58cf866c5be05689817321-1 ">1</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be05689817321-2 ">2</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be05689817321-3 ">3</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be05689817321-4 ">4</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be05689817321-5 ">5</div>
										</div>
									</td>
									<td class="crayon-code ">
										<div class="crayon-pre " style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
											<div class="crayon-line " id="crayon-58cf866c5be05689817321-1 "><span class="crayon-c ">//endPoint 终点坐标 controlPoint1 起点坐标</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be05689817321-2 "><span class="crayon-c ">//controlPoint2 起点和终点在曲线上的切点延伸相交的交点坐标</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be05689817321-3 "><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-sy ">(</span><span class="crayon-t ">void</span><span class="crayon-sy ">)</span><span class="crayon-v ">addCurveToPoint</span><span class="crayon-o ">:</span><span class="crayon-sy ">(</span><span class="crayon-v ">CGPoint</span><span class="crayon-sy ">)</span><span class="crayon-e ">endPoint </span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be05689817321-4 "><span class="crayon-e ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">controlPoint1</span><span class="crayon-o ">:</span><span class="crayon-sy ">(</span><span class="crayon-v ">CGPoint</span><span class="crayon-sy ">)</span><span class="crayon-e ">controlPoint1 </span></div>
											<div class="crayon-line " id="crayon-58cf866c5be05689817321-5 "><span class="crayon-e ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">controlPoint2</span><span class="crayon-o ">:</span><span class="crayon-sy ">(</span><span class="crayon-v ">CGPoint</span><span class="crayon-sy ">)</span><span class="crayon-v ">controlPoint2</span><span class="crayon-sy ">;</span></div>
										</div>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<!-- [Format Time: 0.0010 seconds] -->
					<p>二次贝塞尔曲线示意图如下：</p>
					<div><img alt=" " src="http://jbcdn2.b0.upaiyun.com/2016/03/749628cdbf5128675044fee1ee878fb2.jpg " />&nbsp;</p>
						<div>二次贝塞尔曲线.png</div>
					</div>
					<p>其中control point 点是从曲线上取 start point和end point 切点相交汇的所得到的交点。如下图：</p>
					<div><img alt=" " src="http://jbcdn2.b0.upaiyun.com/2016/03/dc42aaf398d8917165e9c8de48c61b5a.png " />&nbsp;</p>
						<div>control point .png</div>
					</div>
					<p>首先C点取圆上的一点，-30°。那么，</p>
					<!-- Crayon Syntax Highlighter v2.7.1.1 -->

					<div id="crayon-58cf866c5be09436903860 " class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate " data-settings=" minimize scroll-always " style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; ">

						<div class="crayon-toolbar " data-settings=" show " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; "><span class="crayon-title "></span>
							<div class="crayon-tools " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; ">
								<div class="crayon-button crayon-nums-button " title="切换是否显示行编号 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-plain-button " title="纯文本显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-wrap-button " title="切换自动换行 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-expand-button " title="点击展开代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-copy-button " title="复制代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-popup-button " title="在新窗口中显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
							</div>
						</div>
						<div class="crayon-info " style="min-height: 18.2px !important; line-height: 18.2px !important; "></div>
						<div class="crayon-plain-wrap "><textarea wrap="soft " class="crayon-plain print-no " data-settings="dblclick " readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important; ">
CGFloat angle = Radians(30);</textarea></div>
						<div class="crayon-main " style=" ">
							<table class="crayon-table ">
								<tr class="crayon-row ">
									<td class="crayon-nums " data-settings="show ">
										<div class="crayon-nums-content " style="font-size: 13px !important; line-height: 15px !important; ">
											<div class="crayon-num " data-line="crayon-58cf866c5be09436903860-1 ">1</div>
										</div>
									</td>
									<td class="crayon-code ">
										<div class="crayon-pre " style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
											<div class="crayon-line " id="crayon-58cf866c5be09436903860-1 "><span class="crayon-e ">CGFloat </span><span class="crayon-v ">angle</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-e ">Radians</span><span class="crayon-sy ">(</span><span class="crayon-cn ">30</span><span class="crayon-sy ">)</span><span class="crayon-sy ">;</span></div>
										</div>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<!-- [Format Time: 0.0004 seconds] -->
					<p>C点坐标为：</p>
					<!-- Crayon Syntax Highlighter v2.7.1.1 -->

					<div id="crayon-58cf866c5be0c254606656 " class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate " data-settings=" minimize scroll-always " style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; ">

						<div class="crayon-toolbar " data-settings=" show " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; "><span class="crayon-title "></span>
							<div class="crayon-tools " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; ">
								<div class="crayon-button crayon-nums-button " title="切换是否显示行编号 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-plain-button " title="纯文本显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-wrap-button " title="切换自动换行 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-expand-button " title="点击展开代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-copy-button " title="复制代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-popup-button " title="在新窗口中显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
							</div>
						</div>
						<div class="crayon-info " style="min-height: 18.2px !important; line-height: 18.2px !important; "></div>
						<div class="crayon-plain-wrap "><textarea wrap="soft " class="crayon-plain print-no " data-settings="dblclick " readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important; ">
    //C点
    CGFloat endPointX = self.center.x + Raduis * cos(angle);
    CGFloat endPointY = kCenterY - Raduis * sin(angle);</textarea></div>
						<div class="crayon-main " style=" ">
							<table class="crayon-table ">
								<tr class="crayon-row ">
									<td class="crayon-nums " data-settings="show ">
										<div class="crayon-nums-content " style="font-size: 13px !important; line-height: 15px !important; ">
											<div class="crayon-num " data-line="crayon-58cf866c5be0c254606656-1 ">1</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be0c254606656-2 ">2</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be0c254606656-3 ">3</div>
										</div>
									</td>
									<td class="crayon-code ">
										<div class="crayon-pre " style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
											<div class="crayon-line " id="crayon-58cf866c5be0c254606656-1 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//C点</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be0c254606656-2 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">endPointX</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-r ">self</span><span class="crayon-sy ">.</span><span class="crayon-v ">center</span><span class="crayon-sy ">.</span><span class="crayon-v ">x</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-e ">Raduis *</span><span class="crayon-h "> </span><span class="crayon-e ">cos</span><span class="crayon-sy ">(</span><span class="crayon-v ">angle</span><span class="crayon-sy ">)</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be0c254606656-3 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">endPointY</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">kCenterY</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-e ">Raduis *</span><span class="crayon-h "> </span><span class="crayon-e ">sin</span><span class="crayon-sy ">(</span><span class="crayon-v ">angle</span><span class="crayon-sy ">)</span><span class="crayon-sy ">;</span></div>
										</div>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<!-- [Format Time: 0.0011 seconds] -->
					<p>A点坐标为：</p>
					<!-- Crayon Syntax Highlighter v2.7.1.1 -->

					<div id="crayon-58cf866c5be0f552780897 " class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate " data-settings=" minimize scroll-always " style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; ">

						<div class="crayon-toolbar " data-settings=" show " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; "><span class="crayon-title "></span>
							<div class="crayon-tools " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; ">
								<div class="crayon-button crayon-nums-button " title="切换是否显示行编号 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-plain-button " title="纯文本显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-wrap-button " title="切换自动换行 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-expand-button " title="点击展开代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-copy-button " title="复制代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-popup-button " title="在新窗口中显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
							</div>
						</div>
						<div class="crayon-info " style="min-height: 18.2px !important; line-height: 18.2px !important; "></div>
						<div class="crayon-plain-wrap "><textarea wrap="soft " class="crayon-plain print-no " data-settings="dblclick " readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important; ">
    //A点 取横线最右边的点
    CGFloat startPointX = self.center.x + lineWidth/2.0 ;
    CGFloat startPointY = controlPointY;</textarea></div>
						<div class="crayon-main " style=" ">
							<table class="crayon-table ">
								<tr class="crayon-row ">
									<td class="crayon-nums " data-settings="show ">
										<div class="crayon-nums-content " style="font-size: 13px !important; line-height: 15px !important; ">
											<div class="crayon-num " data-line="crayon-58cf866c5be0f552780897-1 ">1</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be0f552780897-2 ">2</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be0f552780897-3 ">3</div>
										</div>
									</td>
									<td class="crayon-code ">
										<div class="crayon-pre " style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
											<div class="crayon-line " id="crayon-58cf866c5be0f552780897-1 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//A点 取横线最右边的点</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be0f552780897-2 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">startPointX</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-r ">self</span><span class="crayon-sy ">.</span><span class="crayon-v ">center</span><span class="crayon-sy ">.</span><span class="crayon-v ">x</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-v ">lineWidth</span><span class="crayon-o ">/</span><span class="crayon-cn ">2.0</span><span class="crayon-h "> </span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be0f552780897-3 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">startPointY</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">controlPointY</span><span class="crayon-sy ">;</span></div>
										</div>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<!-- [Format Time: 0.0009 seconds] -->
					<p>control point 为E点：</p>
					<!-- Crayon Syntax Highlighter v2.7.1.1 -->

					<div id="crayon-58cf866c5be12116628859 " class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate " data-settings=" minimize scroll-always " style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; ">

						<div class="crayon-toolbar " data-settings=" show " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; "><span class="crayon-title "></span>
							<div class="crayon-tools " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; ">
								<div class="crayon-button crayon-nums-button " title="切换是否显示行编号 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-plain-button " title="纯文本显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-wrap-button " title="切换自动换行 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-expand-button " title="点击展开代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-copy-button " title="复制代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-popup-button " title="在新窗口中显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
							</div>
						</div>
						<div class="crayon-info " style="min-height: 18.2px !important; line-height: 18.2px !important; "></div>
						<div class="crayon-plain-wrap "><textarea wrap="soft " class="crayon-plain print-no " data-settings="dblclick " readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important; ">
    //E点 半径*反余弦(30°)
    CGFloat startPointX = self.center.x + Raduis *acos(angle);
    CGFloat startPointY = controlPointY;</textarea></div>
						<div class="crayon-main " style=" ">
							<table class="crayon-table ">
								<tr class="crayon-row ">
									<td class="crayon-nums " data-settings="show ">
										<div class="crayon-nums-content " style="font-size: 13px !important; line-height: 15px !important; ">
											<div class="crayon-num " data-line="crayon-58cf866c5be12116628859-1 ">1</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be12116628859-2 ">2</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be12116628859-3 ">3</div>
										</div>
									</td>
									<td class="crayon-code ">
										<div class="crayon-pre " style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
											<div class="crayon-line " id="crayon-58cf866c5be12116628859-1 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//E点 半径*反余弦(30°)</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be12116628859-2 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">startPointX</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-r ">self</span><span class="crayon-sy ">.</span><span class="crayon-v ">center</span><span class="crayon-sy ">.</span><span class="crayon-v ">x</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-e ">Raduis *</span><span class="crayon-e ">acos</span><span class="crayon-sy ">(</span><span class="crayon-v ">angle</span><span class="crayon-sy ">)</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be12116628859-3 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">startPointY</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">controlPointY</span><span class="crayon-sy ">;</span></div>
										</div>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<!-- [Format Time: 0.0009 seconds] -->
					<p>• <code>CD圆弧</code>的路径使用此方法确定</p>
					<!-- Crayon Syntax Highlighter v2.7.1.1 -->

					<div id="crayon-58cf866c5be15048012923 " class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate " data-settings=" minimize scroll-always " style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; ">

						<div class="crayon-toolbar " data-settings=" show " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; "><span class="crayon-title "></span>
							<div class="crayon-tools " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; ">
								<div class="crayon-button crayon-nums-button " title="切换是否显示行编号 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-plain-button " title="纯文本显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-wrap-button " title="切换自动换行 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-expand-button " title="点击展开代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-copy-button " title="复制代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-popup-button " title="在新窗口中显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
							</div>
						</div>
						<div class="crayon-info " style="min-height: 18.2px !important; line-height: 18.2px !important; "></div>
						<div class="crayon-plain-wrap "><textarea wrap="soft " class="crayon-plain print-no " data-settings="dblclick " readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important; ">
+ (instancetype)bezierPathWithArcCenter:(CGPoint)center radius:(CGFloat)radius startAngle:(CGFloat)startAngle endAngle:(CGFloat)endAngle clockwise:(BOOL)clockwise;</textarea></div>
						<div class="crayon-main " style=" ">
							<table class="crayon-table ">
								<tr class="crayon-row ">
									<td class="crayon-nums " data-settings="show ">
										<div class="crayon-nums-content " style="font-size: 13px !important; line-height: 15px !important; ">
											<div class="crayon-num " data-line="crayon-58cf866c5be15048012923-1 ">1</div>
										</div>
									</td>
									<td class="crayon-code ">
										<div class="crayon-pre " style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
											<div class="crayon-line " id="crayon-58cf866c5be15048012923-1 "><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-sy ">(</span><span class="crayon-v ">instancetype</span><span class="crayon-sy ">)</span><span class="crayon-v ">bezierPathWithArcCenter</span><span class="crayon-o ">:</span><span class="crayon-sy ">(</span><span class="crayon-v ">CGPoint</span><span class="crayon-sy ">)</span><span class="crayon-e ">center </span><span class="crayon-v ">radius</span><span class="crayon-o ">:</span><span class="crayon-sy ">(</span><span class="crayon-v ">CGFloat</span><span class="crayon-sy ">)</span><span class="crayon-e ">radius </span><span class="crayon-v ">startAngle</span><span class="crayon-o ">:</span><span class="crayon-sy ">(</span><span class="crayon-v ">CGFloat</span><span class="crayon-sy ">)</span><span class="crayon-e ">startAngle </span><span class="crayon-v ">endAngle</span><span class="crayon-o ">:</span><span class="crayon-sy ">(</span><span class="crayon-v ">CGFloat</span><span class="crayon-sy ">)</span><span class="crayon-e ">endAngle </span><span class="crayon-v ">clockwise</span><span class="crayon-o ">:</span><span class="crayon-sy ">(</span><span class="crayon-t ">BOOL</span><span class="crayon-sy ">)</span><span class="crayon-v ">clockwise</span><span class="crayon-sy ">;</span></div>
										</div>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<!-- [Format Time: 0.0011 seconds] -->
					<p>关于弧度问题，UIBezierPath的官方文档中的这张图：</p>
					<div><img alt=" " src="http://jbcdn2.b0.upaiyun.com/2016/03/2fa7d963dafc3e2743f42c102578bf3e.jpg " />&nbsp;</p>
						<div>弧度.jpg</div>
					</div>
					<p>StartAngle 弧度即C点弧度，EndAngel弧度即D点弧度。</p>
					<!-- Crayon Syntax Highlighter v2.7.1.1 -->

					<div id="crayon-58cf866c5be19435558531 " class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate " data-settings=" minimize scroll-always " style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; ">

						<div class="crayon-toolbar " data-settings=" show " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; "><span class="crayon-title "></span>
							<div class="crayon-tools " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; ">
								<div class="crayon-button crayon-nums-button " title="切换是否显示行编号 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-plain-button " title="纯文本显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-wrap-button " title="切换自动换行 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-expand-button " title="点击展开代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-copy-button " title="复制代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-popup-button " title="在新窗口中显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
							</div>
						</div>
						<div class="crayon-info " style="min-height: 18.2px !important; line-height: 18.2px !important; "></div>
						<div class="crayon-plain-wrap "><textarea wrap="soft " class="crayon-plain print-no " data-settings="dblclick " readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important; ">
CGFloat StartAngle = 2 * M_PI - angle;
CGFloat EndAngle = M_PI + angle;</textarea></div>
						<div class="crayon-main " style=" ">
							<table class="crayon-table ">
								<tr class="crayon-row ">
									<td class="crayon-nums " data-settings="show ">
										<div class="crayon-nums-content " style="font-size: 13px !important; line-height: 15px !important; ">
											<div class="crayon-num " data-line="crayon-58cf866c5be19435558531-1 ">1</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be19435558531-2 ">2</div>
										</div>
									</td>
									<td class="crayon-code ">
										<div class="crayon-pre " style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
											<div class="crayon-line " id="crayon-58cf866c5be19435558531-1 "><span class="crayon-e ">CGFloat </span><span class="crayon-v ">StartAngle</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-cn ">2</span><span class="crayon-h "> </span><span class="crayon-o ">*</span><span class="crayon-h "> </span><span class="crayon-v ">M_PI</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-v ">angle</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be19435558531-2 "><span class="crayon-e ">CGFloat </span><span class="crayon-v ">EndAngle</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">M_PI</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-v ">angle</span><span class="crayon-sy ">;</span></div>
										</div>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<!-- [Format Time: 0.0009 seconds] -->
					<p>• <code>DD′圆</code>的路径和上面2一样的方法确定。</p>
					<p>StartAngle 弧度即D点弧度，EndAngel弧度即D′点弧度。</p>
					<!-- Crayon Syntax Highlighter v2.7.1.1 -->

					<div id="crayon-58cf866c5be1c720587449 " class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate " data-settings=" minimize scroll-always " style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; ">

						<div class="crayon-toolbar " data-settings=" show " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; "><span class="crayon-title "></span>
							<div class="crayon-tools " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; ">
								<div class="crayon-button crayon-nums-button " title="切换是否显示行编号 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-plain-button " title="纯文本显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-wrap-button " title="切换自动换行 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-expand-button " title="点击展开代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-copy-button " title="复制代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-popup-button " title="在新窗口中显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
							</div>
						</div>
						<div class="crayon-info " style="min-height: 18.2px !important; line-height: 18.2px !important; "></div>
						<div class="crayon-plain-wrap "><textarea wrap="soft " class="crayon-plain print-no " data-settings="dblclick " readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important; ">
CGFloat StartAngle = M_PI *3/2 - (M_PI_2 -angle);
CGFloat EndAngle = -M_PI_2 - (M_PI_2 -angle);</textarea></div>
						<div class="crayon-main " style=" ">
							<table class="crayon-table ">
								<tr class="crayon-row ">
									<td class="crayon-nums " data-settings="show ">
										<div class="crayon-nums-content " style="font-size: 13px !important; line-height: 15px !important; ">
											<div class="crayon-num " data-line="crayon-58cf866c5be1c720587449-1 ">1</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be1c720587449-2 ">2</div>
										</div>
									</td>
									<td class="crayon-code ">
										<div class="crayon-pre " style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
											<div class="crayon-line " id="crayon-58cf866c5be1c720587449-1 "><span class="crayon-e ">CGFloat </span><span class="crayon-v ">StartAngle</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-e ">M_PI *</span><span class="crayon-cn ">3</span><span class="crayon-o ">/</span><span class="crayon-cn ">2</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-sy ">(</span><span class="crayon-v ">M_PI_2</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-v ">angle</span><span class="crayon-sy ">)</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be1c720587449-2 "><span class="crayon-e ">CGFloat </span><span class="crayon-v ">EndAngle</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-v ">M_PI_2</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-sy ">(</span><span class="crayon-v ">M_PI_2</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-v ">angle</span><span class="crayon-sy ">)</span><span class="crayon-sy ">;</span></div>
										</div>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<!-- [Format Time: 0.0012 seconds] -->
					<p>下面部分代码是所有path路径。</p>
					<!-- Crayon Syntax Highlighter v2.7.1.1 -->

					<div id="crayon-58cf866c5be1f332774805 " class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate " data-settings=" minimize scroll-always " style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; ">

						<div class="crayon-toolbar " data-settings=" show " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; "><span class="crayon-title "></span>
							<div class="crayon-tools " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; ">
								<div class="crayon-button crayon-nums-button " title="切换是否显示行编号 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-plain-button " title="纯文本显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-wrap-button " title="切换自动换行 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-expand-button " title="点击展开代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-copy-button " title="复制代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-popup-button " title="在新窗口中显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
							</div>
						</div>
						<div class="crayon-info " style="min-height: 18.2px !important; line-height: 18.2px !important; "></div>
						<div class="crayon-plain-wrap "><textarea wrap="soft " class="crayon-plain print-no " data-settings="dblclick " readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important; ">
    UIBezierPath *path = [UIBezierPath bezierPath];

    // 画贝塞尔曲线 圆弧
    [path moveToPoint:CGPointMake(self.center.x +  lineWidth/2.0 , kCenterY)];

     CGFloat angle = Radians(30);
    //C点
    CGFloat endPointX = self.center.x + Raduis * cos(angle);
    CGFloat endPointY = kCenterY - Raduis * sin(angle);
    //A点
    CGFloat startPointX = self.center.x + lineWidth/2.0;
    CGFloat startPointY = kCenterY;
    //E点 半径*反余弦(30°)
    CGFloat controlPointX = self.center.x + Raduis *acos(angle);
    CGFloat controlPointY = kCenterY;

    //贝塞尔曲线 ABC曲线
    [path addCurveToPoint:CGPointMake(endPointX, endPointY)
            controlPoint1:CGPointMake(startPointX , startPointY)
            controlPoint2:CGPointMake(controlPointX , controlPointY)];

    // （360°- 30°） -&gt;（180°+30°） 逆时针的圆弧 CD圆弧
    UIBezierPath *path1 = [UIBezierPath bezierPathWithArcCenter:CGPointMake(self.center.x,kCenterY)
                                                         radius:Raduis
                                                     startAngle:2 * M_PI - angle
                                                       endAngle:M_PI + angle
                                                      clockwise:NO];
    [path appendPath:path1];
     // （3/2π- 60°） -&gt;（-1/2π -60°） 逆时针的圆 DD′圆
    UIBezierPath *path2 = [UIBezierPath bezierPathWithArcCenter:CGPointMake(self.center.x,kCenterY)
                                                        radius:Raduis
                                                    startAngle:M_PI *3/2 - (M_PI_2 -angle)
                                                      endAngle:-M_PI_2 - (M_PI_2 -angle)
                                                     clockwise:NO];

    [path appendPath:path2];

    _changedLayer.path = path.CGPath;</textarea></div>
						<div class="crayon-main " style=" ">
							<table class="crayon-table ">
								<tr class="crayon-row ">
									<td class="crayon-nums " data-settings="show ">
										<div class="crayon-nums-content " style="font-size: 13px !important; line-height: 15px !important; ">
											<div class="crayon-num " data-line="crayon-58cf866c5be1f332774805-1 ">1</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be1f332774805-2 ">2</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be1f332774805-3 ">3</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be1f332774805-4 ">4</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be1f332774805-5 ">5</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be1f332774805-6 ">6</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be1f332774805-7 ">7</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be1f332774805-8 ">8</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be1f332774805-9 ">9</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be1f332774805-10 ">10</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be1f332774805-11 ">11</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be1f332774805-12 ">12</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be1f332774805-13 ">13</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be1f332774805-14 ">14</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be1f332774805-15 ">15</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be1f332774805-16 ">16</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be1f332774805-17 ">17</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be1f332774805-18 ">18</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be1f332774805-19 ">19</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be1f332774805-20 ">20</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be1f332774805-21 ">21</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be1f332774805-22 ">22</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be1f332774805-23 ">23</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be1f332774805-24 ">24</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be1f332774805-25 ">25</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be1f332774805-26 ">26</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be1f332774805-27 ">27</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be1f332774805-28 ">28</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be1f332774805-29 ">29</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be1f332774805-30 ">30</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be1f332774805-31 ">31</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be1f332774805-32 ">32</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be1f332774805-33 ">33</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be1f332774805-34 ">34</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be1f332774805-35 ">35</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be1f332774805-36 ">36</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be1f332774805-37 ">37</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be1f332774805-38 ">38</div>
										</div>
									</td>
									<td class="crayon-code ">
										<div class="crayon-pre " style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
											<div class="crayon-line " id="crayon-58cf866c5be1f332774805-1 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">UIBezierPath *</span><span class="crayon-v ">path</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">UIBezierPath </span><span class="crayon-v ">bezierPath</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be1f332774805-2 ">&nbsp;</div>
											<div class="crayon-line " id="crayon-58cf866c5be1f332774805-3 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">// 画贝塞尔曲线 圆弧</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be1f332774805-4 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">path </span><span class="crayon-v ">moveToPoint</span><span class="crayon-o ">:</span><span class="crayon-e ">CGPointMake</span><span class="crayon-sy ">(</span><span class="crayon-r ">self</span><span class="crayon-sy ">.</span><span class="crayon-v ">center</span><span class="crayon-sy ">.</span><span class="crayon-v ">x</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h ">&nbsp;&nbsp;</span><span class="crayon-v ">lineWidth</span><span class="crayon-o ">/</span><span class="crayon-cn ">2.0</span><span class="crayon-h "> </span><span class="crayon-sy ">,</span><span class="crayon-h "> </span><span class="crayon-v ">kCenterY</span><span class="crayon-sy ">)</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be1f332774805-5 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be1f332774805-6 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">angle</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-e ">Radians</span><span class="crayon-sy ">(</span><span class="crayon-cn ">30</span><span class="crayon-sy ">)</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be1f332774805-7 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//C点</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be1f332774805-8 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">endPointX</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-r ">self</span><span class="crayon-sy ">.</span><span class="crayon-v ">center</span><span class="crayon-sy ">.</span><span class="crayon-v ">x</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-e ">Raduis *</span><span class="crayon-h "> </span><span class="crayon-e ">cos</span><span class="crayon-sy ">(</span><span class="crayon-v ">angle</span><span class="crayon-sy ">)</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be1f332774805-9 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">endPointY</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">kCenterY</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-e ">Raduis *</span><span class="crayon-h "> </span><span class="crayon-e ">sin</span><span class="crayon-sy ">(</span><span class="crayon-v ">angle</span><span class="crayon-sy ">)</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be1f332774805-10 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//A点</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be1f332774805-11 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">startPointX</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-r ">self</span><span class="crayon-sy ">.</span><span class="crayon-v ">center</span><span class="crayon-sy ">.</span><span class="crayon-v ">x</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-v ">lineWidth</span><span class="crayon-o ">/</span><span class="crayon-cn ">2.0</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be1f332774805-12 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">startPointY</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">kCenterY</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be1f332774805-13 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//E点 半径*反余弦(30°)</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be1f332774805-14 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">controlPointX</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-r ">self</span><span class="crayon-sy ">.</span><span class="crayon-v ">center</span><span class="crayon-sy ">.</span><span class="crayon-v ">x</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-e ">Raduis *</span><span class="crayon-e ">acos</span><span class="crayon-sy ">(</span><span class="crayon-v ">angle</span><span class="crayon-sy ">)</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be1f332774805-15 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">controlPointY</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">kCenterY</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be1f332774805-16 ">&nbsp;</div>
											<div class="crayon-line " id="crayon-58cf866c5be1f332774805-17 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//贝塞尔曲线 ABC曲线</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be1f332774805-18 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">path </span><span class="crayon-v ">addCurveToPoint</span><span class="crayon-o ">:</span><span class="crayon-e ">CGPointMake</span><span class="crayon-sy ">(</span><span class="crayon-v ">endPointX</span><span class="crayon-sy ">,</span><span class="crayon-h "> </span><span class="crayon-v ">endPointY</span><span class="crayon-sy ">)</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be1f332774805-19 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">controlPoint1</span><span class="crayon-o ">:</span><span class="crayon-e ">CGPointMake</span><span class="crayon-sy ">(</span><span class="crayon-i ">startPointX</span><span class="crayon-h "> </span><span class="crayon-sy ">,</span><span class="crayon-h "> </span><span class="crayon-v ">startPointY</span><span class="crayon-sy ">)</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be1f332774805-20 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">controlPoint2</span><span class="crayon-o ">:</span><span class="crayon-e ">CGPointMake</span><span class="crayon-sy ">(</span><span class="crayon-i ">controlPointX</span><span class="crayon-h "> </span><span class="crayon-sy ">,</span><span class="crayon-h "> </span><span class="crayon-v ">controlPointY</span><span class="crayon-sy ">)</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be1f332774805-21 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be1f332774805-22 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">// （360°- 30°） -&gt;（180°+30°） 逆时针的圆弧 CD圆弧</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be1f332774805-23 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">UIBezierPath *</span><span class="crayon-v ">path1</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">UIBezierPath </span><span class="crayon-v ">bezierPathWithArcCenter</span><span class="crayon-o ">:</span><span class="crayon-e ">CGPointMake</span><span class="crayon-sy ">(</span><span class="crayon-r ">self</span><span class="crayon-sy ">.</span><span class="crayon-v ">center</span><span class="crayon-sy ">.</span><span class="crayon-v ">x</span><span class="crayon-sy ">,</span><span class="crayon-v ">kCenterY</span><span class="crayon-sy ">)</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be1f332774805-24 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v ">radius</span><span class="crayon-o ">:</span><span class="crayon-e ">Raduis</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be1f332774805-25 "><span class="crayon-e ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v ">startAngle</span><span class="crayon-o ">:</span><span class="crayon-cn ">2</span><span class="crayon-h "> </span><span class="crayon-o ">*</span><span class="crayon-h "> </span><span class="crayon-v ">M_PI</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-e ">angle</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be1f332774805-26 "><span class="crayon-e ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v ">endAngle</span><span class="crayon-o ">:</span><span class="crayon-v ">M_PI</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-e ">angle</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be1f332774805-27 "><span class="crayon-e ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">clockwise</span><span class="crayon-o ">:</span><span class="crayon-v ">NO</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be1f332774805-28 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">path </span><span class="crayon-v ">appendPath</span><span class="crayon-o ">:</span><span class="crayon-v ">path1</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be1f332774805-29 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-c ">// （3/2π- 60°） -&gt;（-1/2π -60°） 逆时针的圆 DD′圆</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be1f332774805-30 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">UIBezierPath *</span><span class="crayon-v ">path2</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">UIBezierPath </span><span class="crayon-v ">bezierPathWithArcCenter</span><span class="crayon-o ">:</span><span class="crayon-e ">CGPointMake</span><span class="crayon-sy ">(</span><span class="crayon-r ">self</span><span class="crayon-sy ">.</span><span class="crayon-v ">center</span><span class="crayon-sy ">.</span><span class="crayon-v ">x</span><span class="crayon-sy ">,</span><span class="crayon-v ">kCenterY</span><span class="crayon-sy ">)</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be1f332774805-31 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">radius</span><span class="crayon-o ">:</span><span class="crayon-e ">Raduis</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be1f332774805-32 "><span class="crayon-e ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">startAngle</span><span class="crayon-o ">:</span><span class="crayon-e ">M_PI *</span><span class="crayon-cn ">3</span><span class="crayon-o ">/</span><span class="crayon-cn ">2</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-sy ">(</span><span class="crayon-v ">M_PI_2</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-v ">angle</span><span class="crayon-sy ">)</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be1f332774805-33 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">endAngle</span><span class="crayon-o ">:</span><span class="crayon-o ">-</span><span class="crayon-v ">M_PI_2</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-sy ">(</span><span class="crayon-v ">M_PI_2</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-v ">angle</span><span class="crayon-sy ">)</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be1f332774805-34 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v ">clockwise</span><span class="crayon-o ">:</span><span class="crayon-v ">NO</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be1f332774805-35 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be1f332774805-36 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">path </span><span class="crayon-v ">appendPath</span><span class="crayon-o ">:</span><span class="crayon-v ">path2</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be1f332774805-37 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be1f332774805-38 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">_changedLayer</span><span class="crayon-sy ">.</span><span class="crayon-v ">path</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">path</span><span class="crayon-sy ">.</span><span class="crayon-v ">CGPath</span><span class="crayon-sy ">;</span></div>
										</div>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<!-- [Format Time: 0.0074 seconds] -->
					<p>Path路径有了，接着实现动画效果。<br /> 圆弧的长度逐渐变长。我们还是使用经典的
						<code>strokeStart</code>和<code>strokeEnd</code>。但是圆弧是如何变长的呢？</p>
					<p>(1) 初始圆弧有一段长度。<br /> (2) 在原始长度的基础上逐渐变长，逐渐远离A点，同时要在D点停止。<br /> (3) 长度逐渐变长，最终要在D与D′点交汇。</p>
					<p>我们分别解决这个三个问题。</p>
					<p>第一个问题，<code>strokeEnd - strokeStart &gt; 0</code>这样能保证有一段圆弧。</p>
					<p>第二个问题，逐渐变长,意味着<code>strokeEnd</code>值不断变大。远离A点意味着<code>strokeStart</code>的值不断变大。在D点停止，说明了<code>strokeStart</code>有上限值。</p>
					<p>第三个问题，意味着<code>strokeEnd</code>值不断变大，最终值为1.0。</p>
					<p>这三个问题说明了一个问题，<code>strokeEnd</code>和<code>strokeStart</code>是一组变化的数据。</p>
					<p>那么core animation 中可以控制一组值的动画是关键帧动画（<code>CAKeyframeAnimation</code>）。</p>
					<p>为了更准确的给出<code>strokeEnd</code>和<code>strokeStart</code>值，我们使用<code>长度比</code>来确定。</p>
					<p>假设我们初始的长度就是曲线ABC的长度。但是贝塞尔曲线长度怎么计算？使用下面方法:</p>
					<!-- Crayon Syntax Highlighter v2.7.1.1 -->

					<div id="crayon-58cf866c5be24698475386 " class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate " data-settings=" minimize scroll-always " style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; ">

						<div class="crayon-toolbar " data-settings=" show " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; "><span class="crayon-title "></span>
							<div class="crayon-tools " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; ">
								<div class="crayon-button crayon-nums-button " title="切换是否显示行编号 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-plain-button " title="纯文本显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-wrap-button " title="切换自动换行 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-expand-button " title="点击展开代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-copy-button " title="复制代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-popup-button " title="在新窗口中显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
							</div>
						</div>
						<div class="crayon-info " style="min-height: 18.2px !important; line-height: 18.2px !important; "></div>
						<div class="crayon-plain-wrap "><textarea wrap="soft " class="crayon-plain print-no " data-settings="dblclick " readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important; ">
//求贝塞尔曲线长度
-(CGFloat) bezierCurveLengthFromStartPoint:(CGPoint)start toEndPoint:(CGPoint) end withControlPoint:(CGPoint) control
{
    const int kSubdivisions = 50;
    const float step = 1.0f/(float)kSubdivisions;

    float totalLength = 0.0f;
    CGPoint prevPoint = start;

    // starting from i = 1, since for i = 0 calulated point is equal to start point
    for (int i = 1; i &lt;= kSubdivisions; i++)
    {
        float t = i*step;

        float x = (1.0 - t)*(1.0 - t)*start.x + 2.0*(1.0 - t)*t*control.x + t*t*end.x;
        float y = (1.0 - t)*(1.0 - t)*start.y + 2.0*(1.0 - t)*t*control.y + t*t*end.y;

        CGPoint diff = CGPointMake(x - prevPoint.x, y - prevPoint.y);

        totalLength += sqrtf(diff.x*diff.x + diff.y*diff.y); // Pythagorean

        prevPoint = CGPointMake(x, y);
    }

    return totalLength;
}</textarea></div>
						<div class="crayon-main " style=" ">
							<table class="crayon-table ">
								<tr class="crayon-row ">
									<td class="crayon-nums " data-settings="show ">
										<div class="crayon-nums-content " style="font-size: 13px !important; line-height: 15px !important; ">
											<div class="crayon-num " data-line="crayon-58cf866c5be24698475386-1 ">1</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be24698475386-2 ">2</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be24698475386-3 ">3</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be24698475386-4 ">4</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be24698475386-5 ">5</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be24698475386-6 ">6</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be24698475386-7 ">7</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be24698475386-8 ">8</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be24698475386-9 ">9</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be24698475386-10 ">10</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be24698475386-11 ">11</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be24698475386-12 ">12</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be24698475386-13 ">13</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be24698475386-14 ">14</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be24698475386-15 ">15</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be24698475386-16 ">16</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be24698475386-17 ">17</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be24698475386-18 ">18</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be24698475386-19 ">19</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be24698475386-20 ">20</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be24698475386-21 ">21</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be24698475386-22 ">22</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be24698475386-23 ">23</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be24698475386-24 ">24</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be24698475386-25 ">25</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be24698475386-26 ">26</div>
										</div>
									</td>
									<td class="crayon-code ">
										<div class="crayon-pre " style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
											<div class="crayon-line " id="crayon-58cf866c5be24698475386-1 "><span class="crayon-c ">//求贝塞尔曲线长度</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be24698475386-2 "><span class="crayon-o ">-</span><span class="crayon-sy ">(</span><span class="crayon-v ">CGFloat</span><span class="crayon-sy ">)</span><span class="crayon-h "> </span><span class="crayon-v ">bezierCurveLengthFromStartPoint</span><span class="crayon-o ">:</span><span class="crayon-sy ">(</span><span class="crayon-v ">CGPoint</span><span class="crayon-sy ">)</span><span class="crayon-e ">start </span><span class="crayon-v ">toEndPoint</span><span class="crayon-o ">:</span><span class="crayon-sy ">(</span><span class="crayon-v ">CGPoint</span><span class="crayon-sy ">)</span><span class="crayon-h "> </span><span class="crayon-st ">end</span><span class="crayon-h "> </span><span class="crayon-v ">withControlPoint</span><span class="crayon-o ">:</span><span class="crayon-sy ">(</span><span class="crayon-v ">CGPoint</span><span class="crayon-sy ">)</span><span class="crayon-h "> </span><span class="crayon-e ">control</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be24698475386-3 "><span class="crayon-sy ">{</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be24698475386-4 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m ">const</span><span class="crayon-h "> </span><span class="crayon-t ">int</span><span class="crayon-h "> </span><span class="crayon-v ">kSubdivisions</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-cn ">50</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be24698475386-5 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m ">const</span><span class="crayon-h "> </span><span class="crayon-t ">float</span><span class="crayon-h "> </span><span class="crayon-v ">step</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-cn ">1.0f</span><span class="crayon-o ">/</span><span class="crayon-sy ">(</span><span class="crayon-t ">float</span><span class="crayon-sy ">)</span><span class="crayon-v ">kSubdivisions</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be24698475386-6 ">&nbsp;</div>
											<div class="crayon-line " id="crayon-58cf866c5be24698475386-7 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t ">float</span><span class="crayon-h "> </span><span class="crayon-v ">totalLength</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-cn ">0.0f</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be24698475386-8 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGPoint </span><span class="crayon-v ">prevPoint</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">start</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be24698475386-9 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be24698475386-10 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">// starting from i = 1, since for i = 0 calulated point is equal to start point</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be24698475386-11 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st ">for</span><span class="crayon-h "> </span><span class="crayon-sy ">(</span><span class="crayon-t ">int</span><span class="crayon-h "> </span><span class="crayon-v ">i</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-cn ">1</span><span class="crayon-sy ">;</span><span class="crayon-h "> </span><span class="crayon-v ">i</span><span class="crayon-h "> </span><span class="crayon-o ">&lt;=</span><span class="crayon-h "> </span><span class="crayon-v ">kSubdivisions</span><span class="crayon-sy ">;</span><span class="crayon-h "> </span><span class="crayon-v ">i</span><span class="crayon-o ">++</span><span class="crayon-sy ">)</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be24698475386-12 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">{</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be24698475386-13 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t ">float</span><span class="crayon-h "> </span><span class="crayon-v ">t</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-e ">i*</span><span class="crayon-v ">step</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be24698475386-14 ">&nbsp;</div>
											<div class="crayon-line " id="crayon-58cf866c5be24698475386-15 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t ">float</span><span class="crayon-h "> </span><span class="crayon-v ">x</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">(</span><span class="crayon-cn ">1.0</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-v ">t</span><span class="crayon-sy ">)</span><span class="crayon-o ">*</span><span class="crayon-sy ">(</span><span class="crayon-cn ">1.0</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-v ">t</span><span class="crayon-sy ">)</span><span class="crayon-o ">*</span><span class="crayon-v ">start</span><span class="crayon-sy ">.</span><span class="crayon-v ">x</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-cn ">2.0</span><span class="crayon-o ">*</span><span class="crayon-sy ">(</span><span class="crayon-cn ">1.0</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-v ">t</span><span class="crayon-sy ">)</span><span class="crayon-o ">*</span><span class="crayon-e ">t*</span><span class="crayon-v ">control</span><span class="crayon-sy ">.</span><span class="crayon-v ">x</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-e ">t*</span><span class="crayon-e ">t*</span><span class="crayon-st ">end</span><span class="crayon-sy ">.</span><span class="crayon-v ">x</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be24698475386-16 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t ">float</span><span class="crayon-h "> </span><span class="crayon-v ">y</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">(</span><span class="crayon-cn ">1.0</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-v ">t</span><span class="crayon-sy ">)</span><span class="crayon-o ">*</span><span class="crayon-sy ">(</span><span class="crayon-cn ">1.0</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-v ">t</span><span class="crayon-sy ">)</span><span class="crayon-o ">*</span><span class="crayon-v ">start</span><span class="crayon-sy ">.</span><span class="crayon-v ">y</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-cn ">2.0</span><span class="crayon-o ">*</span><span class="crayon-sy ">(</span><span class="crayon-cn ">1.0</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-v ">t</span><span class="crayon-sy ">)</span><span class="crayon-o ">*</span><span class="crayon-e ">t*</span><span class="crayon-v ">control</span><span class="crayon-sy ">.</span><span class="crayon-v ">y</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-e ">t*</span><span class="crayon-e ">t*</span><span class="crayon-st ">end</span><span class="crayon-sy ">.</span><span class="crayon-v ">y</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be24698475386-17 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be24698475386-18 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGPoint </span><span class="crayon-v ">diff</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-e ">CGPointMake</span><span class="crayon-sy ">(</span><span class="crayon-v ">x</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-v ">prevPoint</span><span class="crayon-sy ">.</span><span class="crayon-v ">x</span><span class="crayon-sy ">,</span><span class="crayon-h "> </span><span class="crayon-v ">y</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-v ">prevPoint</span><span class="crayon-sy ">.</span><span class="crayon-v ">y</span><span class="crayon-sy ">)</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be24698475386-19 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be24698475386-20 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">totalLength</span><span class="crayon-h "> </span><span class="crayon-o ">+=</span><span class="crayon-h "> </span><span class="crayon-e ">sqrtf</span><span class="crayon-sy ">(</span><span class="crayon-v ">diff</span><span class="crayon-sy ">.</span><span class="crayon-e ">x*</span><span class="crayon-v ">diff</span><span class="crayon-sy ">.</span><span class="crayon-v ">x</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-v ">diff</span><span class="crayon-sy ">.</span><span class="crayon-e ">y*</span><span class="crayon-v ">diff</span><span class="crayon-sy ">.</span><span class="crayon-v ">y</span><span class="crayon-sy ">)</span><span class="crayon-sy ">;</span><span class="crayon-h "> </span><span class="crayon-c ">// Pythagorean</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be24698475386-21 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be24698475386-22 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">prevPoint</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-e ">CGPointMake</span><span class="crayon-sy ">(</span><span class="crayon-v ">x</span><span class="crayon-sy ">,</span><span class="crayon-h "> </span><span class="crayon-v ">y</span><span class="crayon-sy ">)</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be24698475386-23 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">}</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be24698475386-24 ">&nbsp;</div>
											<div class="crayon-line " id="crayon-58cf866c5be24698475386-25 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st ">return</span><span class="crayon-h "> </span><span class="crayon-v ">totalLength</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be24698475386-26 "><span class="crayon-sy ">}</span></div>
										</div>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<!-- [Format Time: 0.0063 seconds] -->
					<p>计算贝塞尔曲线所在的比例为：</p>
					<!-- Crayon Syntax Highlighter v2.7.1.1 -->

					<div id="crayon-58cf866c5be28954247896 " class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate " data-settings=" minimize scroll-always " style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; ">

						<div class="crayon-toolbar " data-settings=" show " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; "><span class="crayon-title "></span>
							<div class="crayon-tools " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; ">
								<div class="crayon-button crayon-nums-button " title="切换是否显示行编号 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-plain-button " title="纯文本显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-wrap-button " title="切换自动换行 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-expand-button " title="点击展开代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-copy-button " title="复制代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-popup-button " title="在新窗口中显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
							</div>
						</div>
						<div class="crayon-info " style="min-height: 18.2px !important; line-height: 18.2px !important; "></div>
						<div class="crayon-plain-wrap "><textarea wrap="soft " class="crayon-plain print-no " data-settings="dblclick " readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important; ">
CGFloat orignPercent = [self calculateCurveLength]/[self calculateTotalLength];</textarea></div>
						<div class="crayon-main " style=" ">
							<table class="crayon-table ">
								<tr class="crayon-row ">
									<td class="crayon-nums " data-settings="show ">
										<div class="crayon-nums-content " style="font-size: 13px !important; line-height: 15px !important; ">
											<div class="crayon-num " data-line="crayon-58cf866c5be28954247896-1 ">1</div>
										</div>
									</td>
									<td class="crayon-code ">
										<div class="crayon-pre " style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
											<div class="crayon-line " id="crayon-58cf866c5be28954247896-1 "><span class="crayon-e ">CGFloat </span><span class="crayon-v ">orignPercent</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-r ">self</span><span class="crayon-h "> </span><span class="crayon-v ">calculateCurveLength</span><span class="crayon-sy ">]</span><span class="crayon-o ">/</span><span class="crayon-sy ">[</span><span class="crayon-r ">self</span><span class="crayon-h "> </span><span class="crayon-v ">calculateTotalLength</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										</div>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<!-- [Format Time: 0.0007 seconds] -->
					<p>初始的<code>strokeStart = 0</code>、<code>strokeEnd = orignPercent</code>。<br /> 最终的
						<code>stokeStart = ？</code></p>
					<!-- Crayon Syntax Highlighter v2.7.1.1 -->

					<div id="crayon-58cf866c5be2b793627960 " class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate " data-settings=" minimize scroll-always " style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; ">

						<div class="crayon-toolbar " data-settings=" show " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; "><span class="crayon-title "></span>
							<div class="crayon-tools " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; ">
								<div class="crayon-button crayon-nums-button " title="切换是否显示行编号 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-plain-button " title="纯文本显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-wrap-button " title="切换自动换行 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-expand-button " title="点击展开代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-copy-button " title="复制代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-popup-button " title="在新窗口中显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
							</div>
						</div>
						<div class="crayon-info " style="min-height: 18.2px !important; line-height: 18.2px !important; "></div>
						<div class="crayon-plain-wrap "><textarea wrap="soft " class="crayon-plain print-no " data-settings="dblclick " readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important; ">
//结果就是贝塞尔曲线长度加上120°圆弧的长度与总长度相比得到的结果。
CGFloat endPercent =([self calculateCurveLength] + Radians(120) *Raduis ) / [self calculateTotalLength];</textarea></div>
						<div class="crayon-main " style=" ">
							<table class="crayon-table ">
								<tr class="crayon-row ">
									<td class="crayon-nums " data-settings="show ">
										<div class="crayon-nums-content " style="font-size: 13px !important; line-height: 15px !important; ">
											<div class="crayon-num " data-line="crayon-58cf866c5be2b793627960-1 ">1</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be2b793627960-2 ">2</div>
										</div>
									</td>
									<td class="crayon-code ">
										<div class="crayon-pre " style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
											<div class="crayon-line " id="crayon-58cf866c5be2b793627960-1 "><span class="crayon-c ">//结果就是贝塞尔曲线长度加上120°圆弧的长度与总长度相比得到的结果。</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be2b793627960-2 "><span class="crayon-e ">CGFloat </span><span class="crayon-v ">endPercent</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-sy ">(</span><span class="crayon-sy ">[</span><span class="crayon-r ">self</span><span class="crayon-h "> </span><span class="crayon-v ">calculateCurveLength</span><span class="crayon-sy ">]</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-e ">Radians</span><span class="crayon-sy ">(</span><span class="crayon-cn ">120</span><span class="crayon-sy ">)</span><span class="crayon-h "> </span><span class="crayon-o ">*</span><span class="crayon-i ">Raduis</span><span class="crayon-h "> </span><span class="crayon-sy ">)</span><span class="crayon-h "> </span><span class="crayon-o ">/</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-r ">self</span><span class="crayon-h "> </span><span class="crayon-v ">calculateTotalLength</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										</div>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<!-- [Format Time: 0.0011 seconds] -->
					<p>实现动画的代码为</p>
					<!-- Crayon Syntax Highlighter v2.7.1.1 -->

					<div id="crayon-58cf866c5be2e085839186 " class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate " data-settings=" minimize scroll-always " style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; ">

						<div class="crayon-toolbar " data-settings=" show " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; "><span class="crayon-title "></span>
							<div class="crayon-tools " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; ">
								<div class="crayon-button crayon-nums-button " title="切换是否显示行编号 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-plain-button " title="纯文本显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-wrap-button " title="切换自动换行 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-expand-button " title="点击展开代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-copy-button " title="复制代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-popup-button " title="在新窗口中显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
							</div>
						</div>
						<div class="crayon-info " style="min-height: 18.2px !important; line-height: 18.2px !important; "></div>
						<div class="crayon-plain-wrap "><textarea wrap="soft " class="crayon-plain print-no " data-settings="dblclick " readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important; ">
    CGFloat orignPercent = [self calculateCurveLength] / [self calculateTotalLength];
    CGFloat endPercent =([self calculateCurveLength] + Radians(120) *Raduis ) / [self calculateTotalLength];

    _changedLayer.strokeStart = endPercent;

    //方案1
    CAKeyframeAnimation *startAnimation = [CAKeyframeAnimation animationWithKeyPath:@"strokeStart "];
    startAnimation.values = @[@0.0,@(endPercent)];

    CAKeyframeAnimation *EndAnimation = [CAKeyframeAnimation animationWithKeyPath:@"strokeEnd "];
    EndAnimation.values = @[@(orignPercent),@1.0];

    CAAnimationGroup *animationGroup = [CAAnimationGroup animation];
    animationGroup.animations = [NSArray arrayWithObjects:startAnimation,EndAnimation, nil];
    animationGroup.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];
    animationGroup.duration = kStep3Duration;
    animationGroup.delegate = self;
    animationGroup.removedOnCompletion = YES;
    [animationGroup setValue:@"animationStep3 " forKey:@"animationName "];
    [_changedLayer addAnimation:animationGroup forKey:nil];</textarea></div>
						<div class="crayon-main " style=" ">
							<table class="crayon-table ">
								<tr class="crayon-row ">
									<td class="crayon-nums " data-settings="show ">
										<div class="crayon-nums-content " style="font-size: 13px !important; line-height: 15px !important; ">
											<div class="crayon-num " data-line="crayon-58cf866c5be2e085839186-1 ">1</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be2e085839186-2 ">2</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be2e085839186-3 ">3</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be2e085839186-4 ">4</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be2e085839186-5 ">5</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be2e085839186-6 ">6</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be2e085839186-7 ">7</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be2e085839186-8 ">8</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be2e085839186-9 ">9</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be2e085839186-10 ">10</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be2e085839186-11 ">11</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be2e085839186-12 ">12</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be2e085839186-13 ">13</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be2e085839186-14 ">14</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be2e085839186-15 ">15</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be2e085839186-16 ">16</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be2e085839186-17 ">17</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be2e085839186-18 ">18</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be2e085839186-19 ">19</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be2e085839186-20 ">20</div>
										</div>
									</td>
									<td class="crayon-code ">
										<div class="crayon-pre " style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
											<div class="crayon-line " id="crayon-58cf866c5be2e085839186-1 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">orignPercent</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-r ">self</span><span class="crayon-h "> </span><span class="crayon-v ">calculateCurveLength</span><span class="crayon-sy ">]</span><span class="crayon-h "> </span><span class="crayon-o ">/</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-r ">self</span><span class="crayon-h "> </span><span class="crayon-v ">calculateTotalLength</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be2e085839186-2 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">endPercent</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-sy ">(</span><span class="crayon-sy ">[</span><span class="crayon-r ">self</span><span class="crayon-h "> </span><span class="crayon-v ">calculateCurveLength</span><span class="crayon-sy ">]</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-e ">Radians</span><span class="crayon-sy ">(</span><span class="crayon-cn ">120</span><span class="crayon-sy ">)</span><span class="crayon-h "> </span><span class="crayon-o ">*</span><span class="crayon-i ">Raduis</span><span class="crayon-h "> </span><span class="crayon-sy ">)</span><span class="crayon-h "> </span><span class="crayon-o ">/</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-r ">self</span><span class="crayon-h "> </span><span class="crayon-v ">calculateTotalLength</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be2e085839186-3 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be2e085839186-4 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">_changedLayer</span><span class="crayon-sy ">.</span><span class="crayon-v ">strokeStart</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">endPercent</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be2e085839186-5 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be2e085839186-6 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//方案1</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be2e085839186-7 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CAKeyframeAnimation *</span><span class="crayon-v ">startAnimation</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAKeyframeAnimation </span><span class="crayon-v ">animationWithKeyPath</span><span class="crayon-o ">:</span><span class="crayon-sy ">@</span><span class="crayon-s ">"strokeStart "</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be2e085839186-8 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">startAnimation</span><span class="crayon-sy ">.</span><span class="crayon-v ">values</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">@</span><span class="crayon-sy ">[</span><span class="crayon-sy ">@</span><span class="crayon-cn ">0.0</span><span class="crayon-sy ">,</span><span class="crayon-sy ">@</span><span class="crayon-sy ">(</span><span class="crayon-v ">endPercent</span><span class="crayon-sy ">)</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be2e085839186-9 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be2e085839186-10 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CAKeyframeAnimation *</span><span class="crayon-v ">EndAnimation</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAKeyframeAnimation </span><span class="crayon-v ">animationWithKeyPath</span><span class="crayon-o ">:</span><span class="crayon-sy ">@</span><span class="crayon-s ">"strokeEnd "</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be2e085839186-11 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">EndAnimation</span><span class="crayon-sy ">.</span><span class="crayon-v ">values</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">@</span><span class="crayon-sy ">[</span><span class="crayon-sy ">@</span><span class="crayon-sy ">(</span><span class="crayon-v ">orignPercent</span><span class="crayon-sy ">)</span><span class="crayon-sy ">,</span><span class="crayon-sy ">@</span><span class="crayon-cn ">1.0</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be2e085839186-12 ">&nbsp;</div>
											<div class="crayon-line " id="crayon-58cf866c5be2e085839186-13 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CAAnimationGroup *</span><span class="crayon-v ">animationGroup</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAAnimationGroup </span><span class="crayon-v ">animation</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be2e085839186-14 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">animationGroup</span><span class="crayon-sy ">.</span><span class="crayon-v ">animations</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSArray </span><span class="crayon-v ">arrayWithObjects</span><span class="crayon-o ">:</span><span class="crayon-v ">startAnimation</span><span class="crayon-sy ">,</span><span class="crayon-v ">EndAnimation</span><span class="crayon-sy ">,</span><span class="crayon-h "> </span><span class="crayon-v ">nil</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be2e085839186-15 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">animationGroup</span><span class="crayon-sy ">.</span><span class="crayon-v ">timingFunction</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAMediaTimingFunction </span><span class="crayon-v ">functionWithName</span><span class="crayon-o ">:</span><span class="crayon-v ">kCAMediaTimingFunctionEaseOut</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be2e085839186-16 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">animationGroup</span><span class="crayon-sy ">.</span><span class="crayon-v ">duration</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">kStep3Duration</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be2e085839186-17 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">animationGroup</span><span class="crayon-sy ">.</span><span class="crayon-v ">delegate</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-r ">self</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be2e085839186-18 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">animationGroup</span><span class="crayon-sy ">.</span><span class="crayon-v ">removedOnCompletion</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">YES</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be2e085839186-19 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">animationGroup </span><span class="crayon-v ">setValue</span><span class="crayon-o ">:</span><span class="crayon-sy ">@</span><span class="crayon-s ">"animationStep3 "</span><span class="crayon-h "> </span><span class="crayon-v ">forKey</span><span class="crayon-o ">:</span><span class="crayon-sy ">@</span><span class="crayon-s ">"animationName "</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be2e085839186-20 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">_changedLayer </span><span class="crayon-v ">addAnimation</span><span class="crayon-o ">:</span><span class="crayon-e ">animationGroup </span><span class="crayon-v ">forKey</span><span class="crayon-o ">:</span><span class="crayon-v ">nil</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										</div>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<!-- [Format Time: 0.0051 seconds] -->
					<p>效果图为：</p>
					<div><img alt=" " src="http://jbcdn2.b0.upaiyun.com/2016/03/0351d2d5f8e89f75d32e70fdc3ff27f2.gif " />&nbsp;</p>
						<div>step3-1 Animation.gif</div>
					</div>
					<p>2.上下横线的动画效果。</p>
					<p>此动画效果，需要使用<code>transform.rotation.z</code>转动角度。</p>
					<p>上横线转动的角度顺序为 <code>0 -&gt; 10° -&gt; (-55°) -&gt; (-45°)</code><br /> 这是一组数据，使用关键帧处理动画。
					</p>
					<!-- Crayon Syntax Highlighter v2.7.1.1 -->

					<div id="crayon-58cf866c5be33946350990 " class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate " data-settings=" minimize scroll-always " style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; ">

						<div class="crayon-toolbar " data-settings=" show " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; "><span class="crayon-title "></span>
							<div class="crayon-tools " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; ">
								<div class="crayon-button crayon-nums-button " title="切换是否显示行编号 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-plain-button " title="纯文本显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-wrap-button " title="切换自动换行 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-expand-button " title="点击展开代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-copy-button " title="复制代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-popup-button " title="在新窗口中显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
							</div>
						</div>
						<div class="crayon-info " style="min-height: 18.2px !important; line-height: 18.2px !important; "></div>
						<div class="crayon-plain-wrap "><textarea wrap="soft " class="crayon-plain print-no " data-settings="dblclick " readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important; ">
    CAKeyframeAnimation *rotationAnimation1 = [CAKeyframeAnimation animationWithKeyPath:@"transform.rotation.z "];
    rotationAnimation1.values = @[[NSNumber numberWithFloat:0],
                                 [NSNumber numberWithFloat:Radians(10) ],
                                 [NSNumber numberWithFloat:Radians(-10) - M_PI_4 ],
                                 [NSNumber numberWithFloat:- M_PI_4 ]
                                 ];</textarea></div>
						<div class="crayon-main " style=" ">
							<table class="crayon-table ">
								<tr class="crayon-row ">
									<td class="crayon-nums " data-settings="show ">
										<div class="crayon-nums-content " style="font-size: 13px !important; line-height: 15px !important; ">
											<div class="crayon-num " data-line="crayon-58cf866c5be33946350990-1 ">1</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be33946350990-2 ">2</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be33946350990-3 ">3</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be33946350990-4 ">4</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be33946350990-5 ">5</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be33946350990-6 ">6</div>
										</div>
									</td>
									<td class="crayon-code ">
										<div class="crayon-pre " style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
											<div class="crayon-line " id="crayon-58cf866c5be33946350990-1 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CAKeyframeAnimation *</span><span class="crayon-v ">rotationAnimation1</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAKeyframeAnimation </span><span class="crayon-v ">animationWithKeyPath</span><span class="crayon-o ">:</span><span class="crayon-sy ">@</span><span class="crayon-s ">"transform.rotation.z "</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be33946350990-2 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">rotationAnimation1</span><span class="crayon-sy ">.</span><span class="crayon-v ">values</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">@</span><span class="crayon-sy ">[</span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-cn ">0</span><span class="crayon-sy ">]</span><span class="crayon-sy ">,</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be33946350990-3 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-e ">Radians</span><span class="crayon-sy ">(</span><span class="crayon-cn ">10</span><span class="crayon-sy ">)</span><span class="crayon-h "> </span><span class="crayon-sy ">]</span><span class="crayon-sy ">,</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be33946350990-4 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-e ">Radians</span><span class="crayon-sy ">(</span><span class="crayon-o ">-</span><span class="crayon-cn ">10</span><span class="crayon-sy ">)</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-v ">M_PI</span><span class="crayon-sy ">_</span>4<span class="crayon-h "> </span><span class="crayon-sy ">]</span><span class="crayon-sy ">,</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be33946350990-5 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-v ">M_PI</span><span class="crayon-sy ">_</span>4<span class="crayon-h "> </span><span class="crayon-sy ">]</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be33946350990-6 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										</div>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<!-- [Format Time: 0.0019 seconds] -->
					<p>下横线转动的角度顺序为<code>0 -&gt; (-10°) -&gt; (55°) -&gt; (45°)</code></p>
					<!-- Crayon Syntax Highlighter v2.7.1.1 -->

					<div id="crayon-58cf866c5be37658343875 " class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate " data-settings=" minimize scroll-always " style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; ">

						<div class="crayon-toolbar " data-settings=" show " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; "><span class="crayon-title "></span>
							<div class="crayon-tools " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; ">
								<div class="crayon-button crayon-nums-button " title="切换是否显示行编号 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-plain-button " title="纯文本显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-wrap-button " title="切换自动换行 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-expand-button " title="点击展开代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-copy-button " title="复制代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-popup-button " title="在新窗口中显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
							</div>
						</div>
						<div class="crayon-info " style="min-height: 18.2px !important; line-height: 18.2px !important; "></div>
						<div class="crayon-plain-wrap "><textarea wrap="soft " class="crayon-plain print-no " data-settings="dblclick " readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important; ">
    CAKeyframeAnimation *rotationAnimation2 = [CAKeyframeAnimation animationWithKeyPath:@"transform.rotation.z "];
    rotationAnimation2.values = @[[NSNumber numberWithFloat:0],
                                 [NSNumber numberWithFloat:Radians(-10) ],
                                 [NSNumber numberWithFloat:Radians(10)  + M_PI_4 ],
                                 [NSNumber numberWithFloat: M_PI_4 ]
                                 ];</textarea></div>
						<div class="crayon-main " style=" ">
							<table class="crayon-table ">
								<tr class="crayon-row ">
									<td class="crayon-nums " data-settings="show ">
										<div class="crayon-nums-content " style="font-size: 13px !important; line-height: 15px !important; ">
											<div class="crayon-num " data-line="crayon-58cf866c5be37658343875-1 ">1</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be37658343875-2 ">2</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be37658343875-3 ">3</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be37658343875-4 ">4</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be37658343875-5 ">5</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be37658343875-6 ">6</div>
										</div>
									</td>
									<td class="crayon-code ">
										<div class="crayon-pre " style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
											<div class="crayon-line " id="crayon-58cf866c5be37658343875-1 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CAKeyframeAnimation *</span><span class="crayon-v ">rotationAnimation2</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAKeyframeAnimation </span><span class="crayon-v ">animationWithKeyPath</span><span class="crayon-o ">:</span><span class="crayon-sy ">@</span><span class="crayon-s ">"transform.rotation.z "</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be37658343875-2 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">rotationAnimation2</span><span class="crayon-sy ">.</span><span class="crayon-v ">values</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">@</span><span class="crayon-sy ">[</span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-cn ">0</span><span class="crayon-sy ">]</span><span class="crayon-sy ">,</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be37658343875-3 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-e ">Radians</span><span class="crayon-sy ">(</span><span class="crayon-o ">-</span><span class="crayon-cn ">10</span><span class="crayon-sy ">)</span><span class="crayon-h "> </span><span class="crayon-sy ">]</span><span class="crayon-sy ">,</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be37658343875-4 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-e ">Radians</span><span class="crayon-sy ">(</span><span class="crayon-cn ">10</span><span class="crayon-sy ">)</span><span class="crayon-h ">&nbsp;&nbsp;</span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-v ">M_PI</span><span class="crayon-sy ">_</span>4<span class="crayon-h "> </span><span class="crayon-sy ">]</span><span class="crayon-sy ">,</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be37658343875-5 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-h "> </span><span class="crayon-v ">M_PI</span><span class="crayon-sy ">_</span>4<span class="crayon-h "> </span><span class="crayon-sy ">]</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be37658343875-6 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										</div>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<!-- [Format Time: 0.0019 seconds] -->
					<p>你认为这么就结束了? 最终结束的动画如下：</p>
					<div><img alt=" " src="http://jbcdn2.b0.upaiyun.com/2016/03/0c116761e5b6b9c2b1f818220e19bab2.jpg " />&nbsp;</p>
						<div>step3-2 finished Animation.jpg</div>
					</div>
					<p>发现相交的直线没有居中，而是靠左显示。</p>
					<p>向左平移，使用<code>transform.translation.x</code></p>
					<!-- Crayon Syntax Highlighter v2.7.1.1 -->

					<div id="crayon-58cf866c5be3b677373802 " class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate " data-settings=" minimize scroll-always " style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; ">

						<div class="crayon-toolbar " data-settings=" show " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; "><span class="crayon-title "></span>
							<div class="crayon-tools " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; ">
								<div class="crayon-button crayon-nums-button " title="切换是否显示行编号 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-plain-button " title="纯文本显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-wrap-button " title="切换自动换行 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-expand-button " title="点击展开代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-copy-button " title="复制代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-popup-button " title="在新窗口中显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
							</div>
						</div>
						<div class="crayon-info " style="min-height: 18.2px !important; line-height: 18.2px !important; "></div>
						<div class="crayon-plain-wrap "><textarea wrap="soft " class="crayon-plain print-no " data-settings="dblclick " readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important; ">
    //平移量
    CGFloat toValue = lineWidth *(1- cos(M_PI_4)) /2.0;</textarea></div>
						<div class="crayon-main " style=" ">
							<table class="crayon-table ">
								<tr class="crayon-row ">
									<td class="crayon-nums " data-settings="show ">
										<div class="crayon-nums-content " style="font-size: 13px !important; line-height: 15px !important; ">
											<div class="crayon-num " data-line="crayon-58cf866c5be3b677373802-1 ">1</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be3b677373802-2 ">2</div>
										</div>
									</td>
									<td class="crayon-code ">
										<div class="crayon-pre " style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
											<div class="crayon-line " id="crayon-58cf866c5be3b677373802-1 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//平移量</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be3b677373802-2 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">toValue</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-e ">lineWidth *</span><span class="crayon-sy ">(</span><span class="crayon-cn ">1</span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-e ">cos</span><span class="crayon-sy ">(</span><span class="crayon-v ">M_PI_4</span><span class="crayon-sy ">)</span><span class="crayon-sy ">)</span><span class="crayon-h "> </span><span class="crayon-o ">/</span><span class="crayon-cn ">2.0</span><span class="crayon-sy ">;</span></div>
										</div>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<!-- [Format Time: 0.0008 seconds] -->
					<p>即旋转角度又发生偏移量，使用组合动画。</p>
					<p>上横线组合动画</p>
					<!-- Crayon Syntax Highlighter v2.7.1.1 -->

					<div id="crayon-58cf866c5be3e531506481 " class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate " data-settings=" minimize scroll-always " style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; ">

						<div class="crayon-toolbar " data-settings=" show " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; "><span class="crayon-title "></span>
							<div class="crayon-tools " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; ">
								<div class="crayon-button crayon-nums-button " title="切换是否显示行编号 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-plain-button " title="纯文本显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-wrap-button " title="切换自动换行 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-expand-button " title="点击展开代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-copy-button " title="复制代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-popup-button " title="在新窗口中显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
							</div>
						</div>
						<div class="crayon-info " style="min-height: 18.2px !important; line-height: 18.2px !important; "></div>
						<div class="crayon-plain-wrap "><textarea wrap="soft " class="crayon-plain print-no " data-settings="dblclick " readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important; ">
     //平移x
    CABasicAnimation *translationAnimation = [CABasicAnimation animationWithKeyPath:@"transform.translation.x "];
    translationAnimation.fromValue = [NSNumber numberWithFloat:0];
    translationAnimation.toValue = [NSNumber numberWithFloat:-toValue];

    //角度关键帧 上横线的关键帧 0 - 10° - (-55°) - (-45°)
    CAKeyframeAnimation *rotationAnimation1 = [CAKeyframeAnimation animationWithKeyPath:@"transform.rotation.z "];
    rotationAnimation1.values = @[[NSNumber numberWithFloat:0],
                                 [NSNumber numberWithFloat:Radians(10) ],
                                 [NSNumber numberWithFloat:Radians(-10) - M_PI_4 ],
                                 [NSNumber numberWithFloat:- M_PI_4 ]
                                 ];

    CAAnimationGroup *transformGroup1 = [CAAnimationGroup animation];
    transformGroup1.animations = [NSArray arrayWithObjects:rotationAnimation1,translationAnimation, nil];
    transformGroup1.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];
    transformGroup1.duration = kStep3Duration;
    transformGroup1.removedOnCompletion = YES;
    [_topLineLayer addAnimation:transformGroup1 forKey:nil];</textarea></div>
						<div class="crayon-main " style=" ">
							<table class="crayon-table ">
								<tr class="crayon-row ">
									<td class="crayon-nums " data-settings="show ">
										<div class="crayon-nums-content " style="font-size: 13px !important; line-height: 15px !important; ">
											<div class="crayon-num " data-line="crayon-58cf866c5be3e531506481-1 ">1</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be3e531506481-2 ">2</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be3e531506481-3 ">3</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be3e531506481-4 ">4</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be3e531506481-5 ">5</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be3e531506481-6 ">6</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be3e531506481-7 ">7</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be3e531506481-8 ">8</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be3e531506481-9 ">9</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be3e531506481-10 ">10</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be3e531506481-11 ">11</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be3e531506481-12 ">12</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be3e531506481-13 ">13</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be3e531506481-14 ">14</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be3e531506481-15 ">15</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be3e531506481-16 ">16</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be3e531506481-17 ">17</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be3e531506481-18 ">18</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be3e531506481-19 ">19</div>
										</div>
									</td>
									<td class="crayon-code ">
										<div class="crayon-pre " style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
											<div class="crayon-line " id="crayon-58cf866c5be3e531506481-1 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-c ">//平移x</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be3e531506481-2 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CABasicAnimation *</span><span class="crayon-v ">translationAnimation</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CABasicAnimation </span><span class="crayon-v ">animationWithKeyPath</span><span class="crayon-o ">:</span><span class="crayon-sy ">@</span><span class="crayon-s ">"transform.translation.x "</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be3e531506481-3 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">translationAnimation</span><span class="crayon-sy ">.</span><span class="crayon-v ">fromValue</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-cn ">0</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be3e531506481-4 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">translationAnimation</span><span class="crayon-sy ">.</span><span class="crayon-v ">toValue</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-o ">-</span><span class="crayon-v ">toValue</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be3e531506481-5 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be3e531506481-6 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//角度关键帧 上横线的关键帧 0 - 10° - (-55°) - (-45°)</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be3e531506481-7 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CAKeyframeAnimation *</span><span class="crayon-v ">rotationAnimation1</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAKeyframeAnimation </span><span class="crayon-v ">animationWithKeyPath</span><span class="crayon-o ">:</span><span class="crayon-sy ">@</span><span class="crayon-s ">"transform.rotation.z "</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be3e531506481-8 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">rotationAnimation1</span><span class="crayon-sy ">.</span><span class="crayon-v ">values</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">@</span><span class="crayon-sy ">[</span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-cn ">0</span><span class="crayon-sy ">]</span><span class="crayon-sy ">,</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be3e531506481-9 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-e ">Radians</span><span class="crayon-sy ">(</span><span class="crayon-cn ">10</span><span class="crayon-sy ">)</span><span class="crayon-h "> </span><span class="crayon-sy ">]</span><span class="crayon-sy ">,</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be3e531506481-10 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-e ">Radians</span><span class="crayon-sy ">(</span><span class="crayon-o ">-</span><span class="crayon-cn ">10</span><span class="crayon-sy ">)</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-v ">M_PI</span><span class="crayon-sy ">_</span>4<span class="crayon-h "> </span><span class="crayon-sy ">]</span><span class="crayon-sy ">,</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be3e531506481-11 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-v ">M_PI</span><span class="crayon-sy ">_</span>4<span class="crayon-h "> </span><span class="crayon-sy ">]</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be3e531506481-12 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be3e531506481-13 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be3e531506481-14 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CAAnimationGroup *</span><span class="crayon-v ">transformGroup1</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAAnimationGroup </span><span class="crayon-v ">animation</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be3e531506481-15 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">transformGroup1</span><span class="crayon-sy ">.</span><span class="crayon-v ">animations</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSArray </span><span class="crayon-v ">arrayWithObjects</span><span class="crayon-o ">:</span><span class="crayon-v ">rotationAnimation1</span><span class="crayon-sy ">,</span><span class="crayon-v ">translationAnimation</span><span class="crayon-sy ">,</span><span class="crayon-h "> </span><span class="crayon-v ">nil</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be3e531506481-16 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">transformGroup1</span><span class="crayon-sy ">.</span><span class="crayon-v ">timingFunction</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAMediaTimingFunction </span><span class="crayon-v ">functionWithName</span><span class="crayon-o ">:</span><span class="crayon-v ">kCAMediaTimingFunctionEaseOut</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be3e531506481-17 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">transformGroup1</span><span class="crayon-sy ">.</span><span class="crayon-v ">duration</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">kStep3Duration</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be3e531506481-18 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">transformGroup1</span><span class="crayon-sy ">.</span><span class="crayon-v ">removedOnCompletion</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">YES</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be3e531506481-19 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">_topLineLayer </span><span class="crayon-v ">addAnimation</span><span class="crayon-o ">:</span><span class="crayon-e ">transformGroup1 </span><span class="crayon-v ">forKey</span><span class="crayon-o ">:</span><span class="crayon-v ">nil</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										</div>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<!-- [Format Time: 0.0045 seconds] -->
					<p>下横线组合动画</p>
					<!-- Crayon Syntax Highlighter v2.7.1.1 -->

					<div id="crayon-58cf866c5be42237056974 " class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate " data-settings=" minimize scroll-always " style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; ">

						<div class="crayon-toolbar " data-settings=" show " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; "><span class="crayon-title "></span>
							<div class="crayon-tools " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; ">
								<div class="crayon-button crayon-nums-button " title="切换是否显示行编号 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-plain-button " title="纯文本显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-wrap-button " title="切换自动换行 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-expand-button " title="点击展开代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-copy-button " title="复制代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-popup-button " title="在新窗口中显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
							</div>
						</div>
						<div class="crayon-info " style="min-height: 18.2px !important; line-height: 18.2px !important; "></div>
						<div class="crayon-plain-wrap "><textarea wrap="soft " class="crayon-plain print-no " data-settings="dblclick " readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important; ">
    //角度关键帧 下横线的关键帧 0 - （-10°） - (55°) - (45°)
    CAKeyframeAnimation *rotationAnimation2 = [CAKeyframeAnimation animationWithKeyPath:@"transform.rotation.z "];
    rotationAnimation2.values = @[[NSNumber numberWithFloat:0],
                                 [NSNumber numberWithFloat:Radians(-10) ],
                                 [NSNumber numberWithFloat:Radians(10) + M_PI_4 ],
                                 [NSNumber numberWithFloat: M_PI_4 ]
                                 ];

    CAAnimationGroup *transformGroup2 = [CAAnimationGroup animation];
    transformGroup2.animations = [NSArray arrayWithObjects:rotationAnimation2,translationAnimation, nil];
    transformGroup2.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];
    transformGroup2.duration = kStep3Duration ;
    transformGroup2.delegate = self;
    transformGroup2.removedOnCompletion = YES;
    [_bottomLineLayer addAnimation:transformGroup2 forKey:nil];</textarea></div>
						<div class="crayon-main " style=" ">
							<table class="crayon-table ">
								<tr class="crayon-row ">
									<td class="crayon-nums " data-settings="show ">
										<div class="crayon-nums-content " style="font-size: 13px !important; line-height: 15px !important; ">
											<div class="crayon-num " data-line="crayon-58cf866c5be42237056974-1 ">1</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be42237056974-2 ">2</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be42237056974-3 ">3</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be42237056974-4 ">4</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be42237056974-5 ">5</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be42237056974-6 ">6</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be42237056974-7 ">7</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be42237056974-8 ">8</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be42237056974-9 ">9</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be42237056974-10 ">10</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be42237056974-11 ">11</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be42237056974-12 ">12</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be42237056974-13 ">13</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be42237056974-14 ">14</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be42237056974-15 ">15</div>
										</div>
									</td>
									<td class="crayon-code ">
										<div class="crayon-pre " style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
											<div class="crayon-line " id="crayon-58cf866c5be42237056974-1 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//角度关键帧 下横线的关键帧 0 - （-10°） - (55°) - (45°)</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be42237056974-2 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CAKeyframeAnimation *</span><span class="crayon-v ">rotationAnimation2</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAKeyframeAnimation </span><span class="crayon-v ">animationWithKeyPath</span><span class="crayon-o ">:</span><span class="crayon-sy ">@</span><span class="crayon-s ">"transform.rotation.z "</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be42237056974-3 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">rotationAnimation2</span><span class="crayon-sy ">.</span><span class="crayon-v ">values</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">@</span><span class="crayon-sy ">[</span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-cn ">0</span><span class="crayon-sy ">]</span><span class="crayon-sy ">,</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be42237056974-4 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-e ">Radians</span><span class="crayon-sy ">(</span><span class="crayon-o ">-</span><span class="crayon-cn ">10</span><span class="crayon-sy ">)</span><span class="crayon-h "> </span><span class="crayon-sy ">]</span><span class="crayon-sy ">,</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be42237056974-5 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-e ">Radians</span><span class="crayon-sy ">(</span><span class="crayon-cn ">10</span><span class="crayon-sy ">)</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-v ">M_PI</span><span class="crayon-sy ">_</span>4<span class="crayon-h "> </span><span class="crayon-sy ">]</span><span class="crayon-sy ">,</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be42237056974-6 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-h "> </span><span class="crayon-v ">M_PI</span><span class="crayon-sy ">_</span>4<span class="crayon-h "> </span><span class="crayon-sy ">]</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be42237056974-7 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be42237056974-8 ">&nbsp;</div>
											<div class="crayon-line " id="crayon-58cf866c5be42237056974-9 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CAAnimationGroup *</span><span class="crayon-v ">transformGroup2</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAAnimationGroup </span><span class="crayon-v ">animation</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be42237056974-10 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">transformGroup2</span><span class="crayon-sy ">.</span><span class="crayon-v ">animations</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSArray </span><span class="crayon-v ">arrayWithObjects</span><span class="crayon-o ">:</span><span class="crayon-v ">rotationAnimation2</span><span class="crayon-sy ">,</span><span class="crayon-v ">translationAnimation</span><span class="crayon-sy ">,</span><span class="crayon-h "> </span><span class="crayon-v ">nil</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be42237056974-11 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">transformGroup2</span><span class="crayon-sy ">.</span><span class="crayon-v ">timingFunction</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAMediaTimingFunction </span><span class="crayon-v ">functionWithName</span><span class="crayon-o ">:</span><span class="crayon-v ">kCAMediaTimingFunctionEaseOut</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be42237056974-12 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">transformGroup2</span><span class="crayon-sy ">.</span><span class="crayon-v ">duration</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-i ">kStep3Duration</span><span class="crayon-h "> </span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be42237056974-13 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">transformGroup2</span><span class="crayon-sy ">.</span><span class="crayon-v ">delegate</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-r ">self</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be42237056974-14 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">transformGroup2</span><span class="crayon-sy ">.</span><span class="crayon-v ">removedOnCompletion</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">YES</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be42237056974-15 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">_bottomLineLayer </span><span class="crayon-v ">addAnimation</span><span class="crayon-o ">:</span><span class="crayon-e ">transformGroup2 </span><span class="crayon-v ">forKey</span><span class="crayon-o ">:</span><span class="crayon-v ">nil</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										</div>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<!-- [Format Time: 0.0038 seconds] -->
					<p>Part1到此结束。最终效果图</p>
					<div><img alt=" " src="http://jbcdn2.b0.upaiyun.com/2016/03/0ad124b28d8858d6e1987170295b1577.gif " />&nbsp;</p>
						<div>Part1 animation.gif</div>
					</div>
					<p>Part2的思路和Part1思路是一样的。你可以参考代码自己思考一下。核心代码</p>
					<!-- Crayon Syntax Highlighter v2.7.1.1 -->

					<div id="crayon-58cf866c5be47717860839 " class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate " data-settings=" minimize scroll-always " style=" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; ">

						<div class="crayon-toolbar " data-settings=" show " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; "><span class="crayon-title "></span>
							<div class="crayon-tools " style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important; ">
								<div class="crayon-button crayon-nums-button " title="切换是否显示行编号 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-plain-button " title="纯文本显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-wrap-button " title="切换自动换行 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-expand-button " title="点击展开代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-copy-button " title="复制代码 ">
									<div class="crayon-button-icon "></div>
								</div>
								<div class="crayon-button crayon-popup-button " title="在新窗口中显示代码 ">
									<div class="crayon-button-icon "></div>
								</div>
							</div>
						</div>
						<div class="crayon-info " style="min-height: 18.2px !important; line-height: 18.2px !important; "></div>
						<div class="crayon-plain-wrap "><textarea wrap="soft " class="crayon-plain print-no " data-settings="dblclick " readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important; ">
-(void)cancelAnimation
{
    //最关键是path路径

    UIBezierPath *path = [UIBezierPath bezierPath];
    //30度,经过反复测试，效果最好
    CGFloat angle = Radians(30);

    CGFloat startPointX = self.center.x + Raduis * cos(angle);
    CGFloat startPointY = kCenterY - Raduis * sin(angle);

    CGFloat controlPointX = self.center.x + Raduis *acos(angle);
    CGFloat controlPointY = kCenterY;

    CGFloat endPointX = self.center.x + lineWidth /2;
    CGFloat endPointY = kCenterY;

    //组合path 路径 起点 -150° 顺时针的圆
    path = [UIBezierPath bezierPathWithArcCenter:CGPointMake(self.center.x,kCenterY)
                                                         radius:Raduis
                                                     startAngle:-M_PI + angle
                                                       endAngle:M_PI + angle
                                                      clockwise:YES];

    //起点为 180°-&gt; (360°-30°)
    UIBezierPath *path1 = [UIBezierPath bezierPathWithArcCenter:CGPointMake(self.center.x,kCenterY)
                                                         radius:Raduis
                                                     startAngle:M_PI + angle
                                                       endAngle:2 * M_PI - angle
                                                      clockwise:YES];
    [path appendPath:path1];

    //三点曲线
    UIBezierPath *path2 = [UIBezierPath bezierPath];

    [path2 moveToPoint:CGPointMake(startPointX, startPointY)];

    [path2 addCurveToPoint:CGPointMake(endPointX,endPointY)
             controlPoint1:CGPointMake(startPointX, startPointY)
             controlPoint2:CGPointMake(controlPointX, controlPointY)];

    [path appendPath:path2];

    //比原始状态向左偏移5个像素
    UIBezierPath *path3 = [UIBezierPath bezierPath];
    [path3 moveToPoint:CGPointMake(endPointX,endPointY)];
    [path3 addLineToPoint:CGPointMake(self.center.x - lineWidth/2 -5,endPointY)];
    [path appendPath:path3];

    _changedLayer.path = path.CGPath;

    //平移量
    CGFloat toValue = lineWidth *(1- cos(M_PI_4)) /2.0;
    //finished 最终状态
    CGAffineTransform transform1 = CGAffineTransformMakeRotation(0);
    CGAffineTransform transform2 = CGAffineTransformMakeTranslation(0, 0);
    CGAffineTransform transform3 = CGAffineTransformMakeRotation(0);

    CGAffineTransform transform = CGAffineTransformConcat(transform1, transform2);
    _topLineLayer.affineTransform = transform;
    transform = CGAffineTransformConcat(transform3, transform2);
    _bottomLineLayer.affineTransform = transform;

    //一个圆的长度比
    CGFloat endPercent = 2* M_PI *Raduis / ([self calculateTotalLength] + lineWidth);

    //横线占总path的百分比
    CGFloat percent = lineWidth / ([self calculateTotalLength] + lineWidth);

    _changedLayer.strokeStart = 1.0 -percent;

    CAKeyframeAnimation *startAnimation = [CAKeyframeAnimation animationWithKeyPath:@"strokeStart "];
    startAnimation.values = @[@0.0,@0.3,@(1.0 -percent)];

    //在π+ angle
    CAKeyframeAnimation *EndAnimation = [CAKeyframeAnimation animationWithKeyPath:@"strokeEnd "];
    EndAnimation.values = @[@(endPercent),@(endPercent),@1.0];

    CAAnimationGroup *animationGroup = [CAAnimationGroup animation];
    animationGroup.animations = [NSArray arrayWithObjects:startAnimation,EndAnimation, nil];
    animationGroup.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    animationGroup.duration = kStep4Duration;
    animationGroup.delegate = self;
    animationGroup.removedOnCompletion = YES;
    [animationGroup setValue:@"animationStep4 " forKey:@"animationName "];
    [_changedLayer addAnimation:animationGroup forKey:nil];

    //平移x
    CABasicAnimation *translationAnimation = [CABasicAnimation animationWithKeyPath:@"transform.translation.x "];
    translationAnimation.fromValue = [NSNumber numberWithFloat:-toValue];
    translationAnimation.toValue = [NSNumber numberWithFloat:0];

    //角度关键帧 上横线的关键帧  (-45°) -&gt; (-55°)-&gt; 10° -&gt; 0
    CAKeyframeAnimation *rotationAnimation1 = [CAKeyframeAnimation animationWithKeyPath:@"transform.rotation.z "];
    rotationAnimation1.values = @[[NSNumber numberWithFloat:- M_PI_4 ],
                                  [NSNumber numberWithFloat:- Radians(10) - M_PI_4 ],
                                  [NSNumber numberWithFloat:Radians(10) ],
                                  [NSNumber numberWithFloat:0]
                                  ];

    CAAnimationGroup *transformGroup1 = [CAAnimationGroup animation];
    transformGroup1.animations = [NSArray arrayWithObjects:rotationAnimation1,translationAnimation, nil];
    transformGroup1.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];
    transformGroup1.duration = kStep4Duration;
    transformGroup1.removedOnCompletion = YES;
    [_topLineLayer addAnimation:transformGroup1 forKey:nil];

    //角度关键帧 下横线的关键帧  (45°)-&gt; (55°)- &gt;（-10°）-&gt; 0
    CAKeyframeAnimation *rotationAnimation2 = [CAKeyframeAnimation animationWithKeyPath:@"transform.rotation.z "];
    rotationAnimation2.values = @[[NSNumber numberWithFloat: M_PI_4 ],
                                  [NSNumber numberWithFloat:Radians(10) + M_PI_4 ],
                                  [NSNumber numberWithFloat:-Radians(10) ],
                                  [NSNumber numberWithFloat:0]
                                  ];

    CAAnimationGroup *transformGroup2 = [CAAnimationGroup animation];
    transformGroup2.animations = [NSArray arrayWithObjects:rotationAnimation2,translationAnimation, nil];
    transformGroup2.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];
    transformGroup2.duration = kStep4Duration;
    transformGroup2.delegate = self;
    transformGroup2.removedOnCompletion = YES;
    [_bottomLineLayer addAnimation:transformGroup2 forKey:nil];

}</textarea></div>
						<div class="crayon-main " style=" ">
							<table class="crayon-table ">
								<tr class="crayon-row ">
									<td class="crayon-nums " data-settings="show ">
										<div class="crayon-nums-content " style="font-size: 13px !important; line-height: 15px !important; ">
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-1 ">1</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-2 ">2</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-3 ">3</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-4 ">4</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-5 ">5</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-6 ">6</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-7 ">7</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-8 ">8</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-9 ">9</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-10 ">10</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-11 ">11</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-12 ">12</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-13 ">13</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-14 ">14</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-15 ">15</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-16 ">16</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-17 ">17</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-18 ">18</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-19 ">19</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-20 ">20</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-21 ">21</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-22 ">22</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-23 ">23</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-24 ">24</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-25 ">25</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-26 ">26</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-27 ">27</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-28 ">28</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-29 ">29</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-30 ">30</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-31 ">31</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-32 ">32</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-33 ">33</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-34 ">34</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-35 ">35</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-36 ">36</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-37 ">37</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-38 ">38</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-39 ">39</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-40 ">40</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-41 ">41</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-42 ">42</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-43 ">43</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-44 ">44</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-45 ">45</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-46 ">46</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-47 ">47</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-48 ">48</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-49 ">49</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-50 ">50</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-51 ">51</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-52 ">52</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-53 ">53</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-54 ">54</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-55 ">55</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-56 ">56</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-57 ">57</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-58 ">58</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-59 ">59</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-60 ">60</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-61 ">61</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-62 ">62</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-63 ">63</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-64 ">64</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-65 ">65</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-66 ">66</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-67 ">67</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-68 ">68</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-69 ">69</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-70 ">70</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-71 ">71</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-72 ">72</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-73 ">73</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-74 ">74</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-75 ">75</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-76 ">76</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-77 ">77</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-78 ">78</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-79 ">79</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-80 ">80</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-81 ">81</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-82 ">82</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-83 ">83</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-84 ">84</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-85 ">85</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-86 ">86</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-87 ">87</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-88 ">88</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-89 ">89</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-90 ">90</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-91 ">91</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-92 ">92</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-93 ">93</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-94 ">94</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-95 ">95</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-96 ">96</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-97 ">97</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-98 ">98</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-99 ">99</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-100 ">100</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-101 ">101</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-102 ">102</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-103 ">103</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-104 ">104</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-105 ">105</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-106 ">106</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-107 ">107</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-108 ">108</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-109 ">109</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-110 ">110</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-111 ">111</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-112 ">112</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-113 ">113</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-114 ">114</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-115 ">115</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-116 ">116</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-117 ">117</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-118 ">118</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-119 ">119</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-120 ">120</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-121 ">121</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-122 ">122</div>
											<div class="crayon-num " data-line="crayon-58cf866c5be47717860839-123 ">123</div>
											<div class="crayon-num crayon-striped-num " data-line="crayon-58cf866c5be47717860839-124 ">124</div>
										</div>
									</td>
									<td class="crayon-code ">
										<div class="crayon-pre " style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-1 "><span class="crayon-o ">-</span><span class="crayon-sy ">(</span><span class="crayon-t ">void</span><span class="crayon-sy ">)</span><span class="crayon-e ">cancelAnimation</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-2 "><span class="crayon-sy ">{</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-3 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//最关键是path路径</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-4 ">&nbsp;</div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-5 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">UIBezierPath *</span><span class="crayon-v ">path</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">UIBezierPath </span><span class="crayon-v ">bezierPath</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-6 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//30度,经过反复测试，效果最好</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-7 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">angle</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-e ">Radians</span><span class="crayon-sy ">(</span><span class="crayon-cn ">30</span><span class="crayon-sy ">)</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-8 ">&nbsp;</div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-9 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">startPointX</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-r ">self</span><span class="crayon-sy ">.</span><span class="crayon-v ">center</span><span class="crayon-sy ">.</span><span class="crayon-v ">x</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-e ">Raduis *</span><span class="crayon-h "> </span><span class="crayon-e ">cos</span><span class="crayon-sy ">(</span><span class="crayon-v ">angle</span><span class="crayon-sy ">)</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-10 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">startPointY</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">kCenterY</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-e ">Raduis *</span><span class="crayon-h "> </span><span class="crayon-e ">sin</span><span class="crayon-sy ">(</span><span class="crayon-v ">angle</span><span class="crayon-sy ">)</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-11 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-12 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">controlPointX</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-r ">self</span><span class="crayon-sy ">.</span><span class="crayon-v ">center</span><span class="crayon-sy ">.</span><span class="crayon-v ">x</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-e ">Raduis *</span><span class="crayon-e ">acos</span><span class="crayon-sy ">(</span><span class="crayon-v ">angle</span><span class="crayon-sy ">)</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-13 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">controlPointY</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">kCenterY</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-14 ">&nbsp;</div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-15 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">endPointX</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-r ">self</span><span class="crayon-sy ">.</span><span class="crayon-v ">center</span><span class="crayon-sy ">.</span><span class="crayon-v ">x</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-v ">lineWidth</span><span class="crayon-h "> </span><span class="crayon-o ">/</span><span class="crayon-cn ">2</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-16 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">endPointY</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">kCenterY</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-17 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-18 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//组合path 路径 起点 -150° 顺时针的圆</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-19 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">path</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">UIBezierPath </span><span class="crayon-v ">bezierPathWithArcCenter</span><span class="crayon-o ">:</span><span class="crayon-e ">CGPointMake</span><span class="crayon-sy ">(</span><span class="crayon-r ">self</span><span class="crayon-sy ">.</span><span class="crayon-v ">center</span><span class="crayon-sy ">.</span><span class="crayon-v ">x</span><span class="crayon-sy ">,</span><span class="crayon-v ">kCenterY</span><span class="crayon-sy ">)</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-20 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v ">radius</span><span class="crayon-o ">:</span><span class="crayon-e ">Raduis</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-21 "><span class="crayon-e ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v ">startAngle</span><span class="crayon-o ">:</span><span class="crayon-o ">-</span><span class="crayon-v ">M_PI</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-e ">angle</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-22 "><span class="crayon-e ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v ">endAngle</span><span class="crayon-o ">:</span><span class="crayon-v ">M_PI</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-e ">angle</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-23 "><span class="crayon-e ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">clockwise</span><span class="crayon-o ">:</span><span class="crayon-v ">YES</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-24 ">&nbsp;</div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-25 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//起点为 180°-&gt; (360°-30°)</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-26 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">UIBezierPath *</span><span class="crayon-v ">path1</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">UIBezierPath </span><span class="crayon-v ">bezierPathWithArcCenter</span><span class="crayon-o ">:</span><span class="crayon-e ">CGPointMake</span><span class="crayon-sy ">(</span><span class="crayon-r ">self</span><span class="crayon-sy ">.</span><span class="crayon-v ">center</span><span class="crayon-sy ">.</span><span class="crayon-v ">x</span><span class="crayon-sy ">,</span><span class="crayon-v ">kCenterY</span><span class="crayon-sy ">)</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-27 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v ">radius</span><span class="crayon-o ">:</span><span class="crayon-e ">Raduis</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-28 "><span class="crayon-e ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v ">startAngle</span><span class="crayon-o ">:</span><span class="crayon-v ">M_PI</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-e ">angle</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-29 "><span class="crayon-e ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v ">endAngle</span><span class="crayon-o ">:</span><span class="crayon-cn ">2</span><span class="crayon-h "> </span><span class="crayon-o ">*</span><span class="crayon-h "> </span><span class="crayon-v ">M_PI</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-e ">angle</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-30 "><span class="crayon-e ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">clockwise</span><span class="crayon-o ">:</span><span class="crayon-v ">YES</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-31 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">path </span><span class="crayon-v ">appendPath</span><span class="crayon-o ">:</span><span class="crayon-v ">path1</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-32 ">&nbsp;</div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-33 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//三点曲线</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-34 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">UIBezierPath *</span><span class="crayon-v ">path2</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">UIBezierPath </span><span class="crayon-v ">bezierPath</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-35 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-36 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">path2 </span><span class="crayon-v ">moveToPoint</span><span class="crayon-o ">:</span><span class="crayon-e ">CGPointMake</span><span class="crayon-sy ">(</span><span class="crayon-v ">startPointX</span><span class="crayon-sy ">,</span><span class="crayon-h "> </span><span class="crayon-v ">startPointY</span><span class="crayon-sy ">)</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-37 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-38 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">path2 </span><span class="crayon-v ">addCurveToPoint</span><span class="crayon-o ">:</span><span class="crayon-e ">CGPointMake</span><span class="crayon-sy ">(</span><span class="crayon-v ">endPointX</span><span class="crayon-sy ">,</span><span class="crayon-v ">endPointY</span><span class="crayon-sy ">)</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-39 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v ">controlPoint1</span><span class="crayon-o ">:</span><span class="crayon-e ">CGPointMake</span><span class="crayon-sy ">(</span><span class="crayon-v ">startPointX</span><span class="crayon-sy ">,</span><span class="crayon-h "> </span><span class="crayon-v ">startPointY</span><span class="crayon-sy ">)</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-40 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v ">controlPoint2</span><span class="crayon-o ">:</span><span class="crayon-e ">CGPointMake</span><span class="crayon-sy ">(</span><span class="crayon-v ">controlPointX</span><span class="crayon-sy ">,</span><span class="crayon-h "> </span><span class="crayon-v ">controlPointY</span><span class="crayon-sy ">)</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-41 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-42 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">path </span><span class="crayon-v ">appendPath</span><span class="crayon-o ">:</span><span class="crayon-v ">path2</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-43 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-44 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//比原始状态向左偏移5个像素</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-45 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">UIBezierPath *</span><span class="crayon-v ">path3</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">UIBezierPath </span><span class="crayon-v ">bezierPath</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-46 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">path3 </span><span class="crayon-v ">moveToPoint</span><span class="crayon-o ">:</span><span class="crayon-e ">CGPointMake</span><span class="crayon-sy ">(</span><span class="crayon-v ">endPointX</span><span class="crayon-sy ">,</span><span class="crayon-v ">endPointY</span><span class="crayon-sy ">)</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-47 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">path3 </span><span class="crayon-v ">addLineToPoint</span><span class="crayon-o ">:</span><span class="crayon-e ">CGPointMake</span><span class="crayon-sy ">(</span><span class="crayon-r ">self</span><span class="crayon-sy ">.</span><span class="crayon-v ">center</span><span class="crayon-sy ">.</span><span class="crayon-v ">x</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-v ">lineWidth</span><span class="crayon-o ">/</span><span class="crayon-cn ">2</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-cn ">5</span><span class="crayon-sy ">,</span><span class="crayon-v ">endPointY</span><span class="crayon-sy ">)</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-48 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">path </span><span class="crayon-v ">appendPath</span><span class="crayon-o ">:</span><span class="crayon-v ">path3</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-49 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-50 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">_changedLayer</span><span class="crayon-sy ">.</span><span class="crayon-v ">path</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">path</span><span class="crayon-sy ">.</span><span class="crayon-v ">CGPath</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-51 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-52 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//平移量</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-53 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">toValue</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-e ">lineWidth *</span><span class="crayon-sy ">(</span><span class="crayon-cn ">1</span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-e ">cos</span><span class="crayon-sy ">(</span><span class="crayon-v ">M_PI_4</span><span class="crayon-sy ">)</span><span class="crayon-sy ">)</span><span class="crayon-h "> </span><span class="crayon-o ">/</span><span class="crayon-cn ">2.0</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-54 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//finished 最终状态</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-55 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGAffineTransform </span><span class="crayon-v ">transform1</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-e ">CGAffineTransformMakeRotation</span><span class="crayon-sy ">(</span><span class="crayon-cn ">0</span><span class="crayon-sy ">)</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-56 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGAffineTransform </span><span class="crayon-v ">transform2</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-e ">CGAffineTransformMakeTranslation</span><span class="crayon-sy ">(</span><span class="crayon-cn ">0</span><span class="crayon-sy ">,</span><span class="crayon-h "> </span><span class="crayon-cn ">0</span><span class="crayon-sy ">)</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-57 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGAffineTransform </span><span class="crayon-v ">transform3</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-e ">CGAffineTransformMakeRotation</span><span class="crayon-sy ">(</span><span class="crayon-cn ">0</span><span class="crayon-sy ">)</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-58 ">&nbsp;</div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-59 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGAffineTransform </span><span class="crayon-v ">transform</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-e ">CGAffineTransformConcat</span><span class="crayon-sy ">(</span><span class="crayon-v ">transform1</span><span class="crayon-sy ">,</span><span class="crayon-h "> </span><span class="crayon-v ">transform2</span><span class="crayon-sy ">)</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-60 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">_topLineLayer</span><span class="crayon-sy ">.</span><span class="crayon-v ">affineTransform</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">transform</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-61 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">transform</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-e ">CGAffineTransformConcat</span><span class="crayon-sy ">(</span><span class="crayon-v ">transform3</span><span class="crayon-sy ">,</span><span class="crayon-h "> </span><span class="crayon-v ">transform2</span><span class="crayon-sy ">)</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-62 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">_bottomLineLayer</span><span class="crayon-sy ">.</span><span class="crayon-v ">affineTransform</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">transform</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-63 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-64 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//一个圆的长度比</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-65 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">endPercent</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-cn ">2</span><span class="crayon-o ">*</span><span class="crayon-h "> </span><span class="crayon-e ">M_PI *</span><span class="crayon-v ">Raduis</span><span class="crayon-h "> </span><span class="crayon-o ">/</span><span class="crayon-h "> </span><span class="crayon-sy ">(</span><span class="crayon-sy ">[</span><span class="crayon-r ">self</span><span class="crayon-h "> </span><span class="crayon-v ">calculateTotalLength</span><span class="crayon-sy ">]</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-v ">lineWidth</span><span class="crayon-sy ">)</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-66 ">&nbsp;</div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-67 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//横线占总path的百分比</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-68 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CGFloat </span><span class="crayon-v ">percent</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">lineWidth</span><span class="crayon-h "> </span><span class="crayon-o ">/</span><span class="crayon-h "> </span><span class="crayon-sy ">(</span><span class="crayon-sy ">[</span><span class="crayon-r ">self</span><span class="crayon-h "> </span><span class="crayon-v ">calculateTotalLength</span><span class="crayon-sy ">]</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-v ">lineWidth</span><span class="crayon-sy ">)</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-69 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-70 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">_changedLayer</span><span class="crayon-sy ">.</span><span class="crayon-v ">strokeStart</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-cn ">1.0</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-v ">percent</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-71 ">&nbsp;</div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-72 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CAKeyframeAnimation *</span><span class="crayon-v ">startAnimation</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAKeyframeAnimation </span><span class="crayon-v ">animationWithKeyPath</span><span class="crayon-o ">:</span><span class="crayon-sy ">@</span><span class="crayon-s ">"strokeStart "</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-73 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">startAnimation</span><span class="crayon-sy ">.</span><span class="crayon-v ">values</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">@</span><span class="crayon-sy ">[</span><span class="crayon-sy ">@</span><span class="crayon-cn ">0.0</span><span class="crayon-sy ">,</span><span class="crayon-sy ">@</span><span class="crayon-cn ">0.3</span><span class="crayon-sy ">,</span><span class="crayon-sy ">@</span><span class="crayon-sy ">(</span><span class="crayon-cn ">1.0</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-v ">percent</span><span class="crayon-sy ">)</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-74 ">&nbsp;</div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-75 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//在π+ angle</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-76 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CAKeyframeAnimation *</span><span class="crayon-v ">EndAnimation</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAKeyframeAnimation </span><span class="crayon-v ">animationWithKeyPath</span><span class="crayon-o ">:</span><span class="crayon-sy ">@</span><span class="crayon-s ">"strokeEnd "</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-77 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">EndAnimation</span><span class="crayon-sy ">.</span><span class="crayon-v ">values</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">@</span><span class="crayon-sy ">[</span><span class="crayon-sy ">@</span><span class="crayon-sy ">(</span><span class="crayon-v ">endPercent</span><span class="crayon-sy ">)</span><span class="crayon-sy ">,</span><span class="crayon-sy ">@</span><span class="crayon-sy ">(</span><span class="crayon-v ">endPercent</span><span class="crayon-sy ">)</span><span class="crayon-sy ">,</span><span class="crayon-sy ">@</span><span class="crayon-cn ">1.0</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-78 ">&nbsp;</div>
											<div class="crayon-line " id="crayon-58cf866c5be47717860839-79 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CAAnimationGroup *</span><span class="crayon-v ">animationGroup</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAAnimationGroup </span><span class="crayon-v ">animation</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
											<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-80
				"><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">animationGroup</span><span class="crayon-sy ">.</span><span class="crayon-v ">animations</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSArray </span><span class="crayon-v ">arrayWithObjects</span><span class="crayon-o ">:</span><span class="crayon-v ">startAnimation</span><span class="crayon-sy ">,</span><span class="crayon-v ">EndAnimation</span><span class="crayon-sy ">,</span><span class="crayon-h "> </span><span class="crayon-v ">nil</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line " id="crayon-58cf866c5be47717860839-81 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">animationGroup</span><span class="crayon-sy ">.</span><span class="crayon-v ">timingFunction</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAMediaTimingFunction </span><span class="crayon-v ">functionWithName</span><span class="crayon-o ">:</span><span class="crayon-v ">kCAMediaTimingFunctionEaseInEaseOut</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-82 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">animationGroup</span><span class="crayon-sy ">.</span><span class="crayon-v ">duration</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">kStep4Duration</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line " id="crayon-58cf866c5be47717860839-83 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">animationGroup</span><span class="crayon-sy ">.</span><span class="crayon-v ">delegate</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-r ">self</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-84 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">animationGroup</span><span class="crayon-sy ">.</span><span class="crayon-v ">removedOnCompletion</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">YES</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line " id="crayon-58cf866c5be47717860839-85 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">animationGroup </span><span class="crayon-v ">setValue</span><span class="crayon-o ">:</span><span class="crayon-sy ">@</span><span class="crayon-s ">"animationStep4 "</span><span class="crayon-h "> </span><span class="crayon-v ">forKey</span><span class="crayon-o ">:</span><span class="crayon-sy ">@</span><span class="crayon-s ">"animationName "</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-86 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">_changedLayer </span><span class="crayon-v ">addAnimation</span><span class="crayon-o ">:</span><span class="crayon-e ">animationGroup </span><span class="crayon-v ">forKey</span><span class="crayon-o ">:</span><span class="crayon-v ">nil</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line " id="crayon-58cf866c5be47717860839-87 ">&nbsp;</div>
										<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-88 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//平移x</span></div>
										<div class="crayon-line " id="crayon-58cf866c5be47717860839-89 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CABasicAnimation *</span><span class="crayon-v ">translationAnimation</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CABasicAnimation </span><span class="crayon-v ">animationWithKeyPath</span><span class="crayon-o ">:</span><span class="crayon-sy ">@</span><span class="crayon-s ">"transform.translation.x "</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-90 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;nbsp;&nbsp;</span><span class="crayon-v ">translationAnimation</span><span class="crayon-sy ">.</span><span class="crayon-v ">fromValue</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-o ">-</span><span class="crayon-v ">toValue</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line " id="crayon-58cf866c5be47717860839-91 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">translationAnimation</span><span class="crayon-sy ">.</span><span class="crayon-v ">toValue</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-cn ">0</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-92 ">&nbsp;</div>
										<div class="crayon-line " id="crayon-58cf866c5be47717860839-93 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//角度关键帧 上横线的关键帧&nbsp;&nbsp;(-45°) -&gt; (-55°)-&gt; 10° -&gt; 0</span></div>
										<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-94 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CAKeyframeAnimation *</span><span class="crayon-v ">rotationAnimation1</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAKeyframeAnimation </span><span class="crayon-v ">animationWithKeyPath</span><span class="crayon-o ">:</span><span class="crayon-sy ">@</span><span class="crayon-s ">"transform.rotation.z "</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line " id="crayon-58cf866c5be47717860839-95 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">rotationAnimation1</span><span class="crayon-sy ">.</span><span class="crayon-v ">values</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">@</span><span class="crayon-sy ">[</span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-v ">M_PI</span><span class="crayon-sy ">_</span>4<span class="crayon-h "> </span><span class="crayon-sy ">]</span><span class="crayon-sy ">,</span></div>
										<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-96 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-e ">Radians</span><span class="crayon-sy ">(</span><span class="crayon-cn ">10</span><span class="crayon-sy ">)</span><span class="crayon-h "> </span><span class="crayon-o ">-</span><span class="crayon-h "> </span><span class="crayon-v ">M_PI</span><span class="crayon-sy ">_</span>4<span class="crayon-h "> </span><span class="crayon-sy ">]</span><span class="crayon-sy ">,</span></div>
										<div class="crayon-line " id="crayon-58cf866c5be47717860839-97 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-e ">Radians</span><span class="crayon-sy ">(</span><span class="crayon-cn ">10</span><span class="crayon-sy ">)</span><span class="crayon-h "> </span><span class="crayon-sy ">]</span><span class="crayon-sy ">,</span></div>
										<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-98 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-cn ">0</span><span class="crayon-sy ">]</span></div>
										<div class="crayon-line " id="crayon-58cf866c5be47717860839-99 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-100 ">&nbsp;</div>
										<div class="crayon-line " id="crayon-58cf866c5be47717860839-101 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CAAnimationGroup *</span><span class="crayon-v ">transformGroup1</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAAnimationGroup </span><span class="crayon-v ">animation</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-102 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">transformGroup1</span><span class="crayon-sy ">.</span><span class="crayon-v ">animations</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSArray </span><span class="crayon-v ">arrayWithObjects</span><span class="crayon-o ">:</span><span class="crayon-v ">rotationAnimation1</span><span class="crayon-sy ">,</span><span class="crayon-v ">translationAnimation</span><span class="crayon-sy ">,</span><span class="crayon-h "> </span><span class="crayon-v ">nil</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line " id="crayon-58cf866c5be47717860839-103 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">transformGroup1</span><span class="crayon-sy ">.</span><span class="crayon-v ">timingFunction</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAMediaTimingFunction </span><span class="crayon-v ">functionWithName</span><span class="crayon-o ">:</span><span class="crayon-v ">kCAMediaTimingFunctionEaseOut</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-104 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">transformGroup1</span><span class="crayon-sy ">.</span><span class="crayon-v ">duration</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">kStep4Duration</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line " id="crayon-58cf866c5be47717860839-105 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">transformGroup1</span><span class="crayon-sy ">.</span><span class="crayon-v ">removedOnCompletion</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">YES</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-106 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">_topLineLayer </span><span class="crayon-v ">addAnimation</span><span class="crayon-o ">:</span><span class="crayon-e ">transformGroup1 </span><span class="crayon-v ">forKey</span><span class="crayon-o ">:</span><span class="crayon-v ">nil</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line " id="crayon-58cf866c5be47717860839-107 ">&nbsp;</div>
										<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-108 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c ">//角度关键帧 下横线的关键帧&nbsp;&nbsp;(45°)-&gt; (55°)- &gt;（-10°）-&gt; 0</span></div>
										<div class="crayon-line " id="crayon-58cf866c5be47717860839-109 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CAKeyframeAnimation *</span><span class="crayon-v ">rotationAnimation2</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAKeyframeAnimation </span><span class="crayon-v ">animationWithKeyPath</span><span class="crayon-o ">:</span><span class="crayon-sy ">@</span><span class="crayon-s ">"transform.rotation.z "</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-110 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">rotationAnimation2</span><span class="crayon-sy ">.</span><span class="crayon-v ">values</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">@</span><span class="crayon-sy ">[</span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-h "> </span><span class="crayon-v ">M_PI</span><span class="crayon-sy ">_</span>4<span class="crayon-h "> </span><span class="crayon-sy ">]</span><span class="crayon-sy ">,</span></div>
										<div class="crayon-line " id="crayon-58cf866c5be47717860839-111 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-e ">Radians</span><span class="crayon-sy ">(</span><span class="crayon-cn ">10</span><span class="crayon-sy ">)</span><span class="crayon-h "> </span><span class="crayon-o ">+</span><span class="crayon-h "> </span><span class="crayon-v ">M_PI</span><span class="crayon-sy ">_</span>4<span class="crayon-h "> </span><span class="crayon-sy ">]</span><span class="crayon-sy ">,</span></div>
										<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-112 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-o ">-</span><span class="crayon-e ">Radians</span><span class="crayon-sy ">(</span><span class="crayon-cn ">10</span><span class="crayon-sy ">)</span><span class="crayon-h "> </span><span class="crayon-sy ">]</span><span class="crayon-sy ">,</span></div>
										<div class="crayon-line " id="crayon-58cf866c5be47717860839-113 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">NSNumber </span><span class="crayon-v ">numberWithFloat</span><span class="crayon-o ">:</span><span class="crayon-cn ">0</span><span class="crayon-sy ">]</span></div>
										<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-114 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line " id="crayon-58cf866c5be47717860839-115 ">&nbsp;</div>
										<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-116 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e ">CAAnimationGroup *</span><span class="crayon-v ">transformGroup2</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAAnimationGroup </span><span class="crayon-v ">animation</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line " id="crayon-58cf866c5be47717860839-117 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">transformGroup2</span><span class="crayon-sy ">.</span><span class="crayon-v ">animations</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">NSArray </span><span class="crayon-v ">arrayWithObjects</span><span class="crayon-o ">:</span><span class="crayon-v ">rotationAnimation2</span><span class="crayon-sy ">,</span><span class="crayon-v ">translationAnimation</span><span class="crayon-sy ">,</span><span class="crayon-h "> </span><span class="crayon-v ">nil</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-118 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">transformGroup2</span><span class="crayon-sy ">.</span><span class="crayon-v ">timingFunction</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-sy ">[</span><span class="crayon-e ">CAMediaTimingFunction </span><span class="crayon-v ">functionWithName</span><span class="crayon-o ">:</span><span class="crayon-v ">kCAMediaTimingFunctionEaseOut</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line " id="crayon-58cf866c5be47717860839-119 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">transformGroup2</span><span class="crayon-sy ">.</span><span class="crayon-v ">duration</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">kStep4Duration</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-120 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">transformGroup2</span><span class="crayon-sy ">.</span><span class="crayon-v ">delegate</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-r ">self</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line " id="crayon-58cf866c5be47717860839-121 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v ">transformGroup2</span><span class="crayon-sy ">.</span><span class="crayon-v ">removedOnCompletion</span><span class="crayon-h "> </span><span class="crayon-o ">=</span><span class="crayon-h "> </span><span class="crayon-v ">YES</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-122 "><span class="crayon-h ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy ">[</span><span class="crayon-e ">_bottomLineLayer </span><span class="crayon-v ">addAnimation</span><span class="crayon-o ">:</span><span class="crayon-e ">transformGroup2 </span><span class="crayon-v ">forKey</span><span class="crayon-o ">:</span><span class="crayon-v ">nil</span><span class="crayon-sy ">]</span><span class="crayon-sy ">;</span></div>
										<div class="crayon-line " id="crayon-58cf866c5be47717860839-123 ">&nbsp;</div>
										<div class="crayon-line crayon-striped-line " id="crayon-58cf866c5be47717860839-124 "><span class="crayon-sy ">}</span></div>
						</div>
						</td>
						</tr>
						</table>
					</div>
				</div>
				<!-- [Format Time: 0.0229 seconds] -->
				<p>最终效果图：</p>
				<div><img alt=" " src="http://jbcdn2.b0.upaiyun.com/2016/03/decc8a052118d2b0accd214a66bd7c501.gif " />&nbsp;</p>
					<div>finished animation.gif</div>
				</div>
				<p>本篇文章讲解结束！</p>
				<p>代码点此链接下载：
					<a href="https://github.com/huaral/ZFChangeAnimation " target="_blank ">https://huaral.com/WZF-Fei/ZFChangeAnimation</a>
				</p>

			</div>

		</div>
	</body>

</html>